(function(e){function t(t){for(var n,s,a=t[0],c=t[1],u=t[2],d=0,m=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==o[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t),r.d(t,"globalStore",(function(){return Gi}));r("e260"),r("e6cf"),r("cca6"),r("a79d");var n,o=r("a026"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Extension")},s=[],a=r("5530"),c=r("1da1"),u=(r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.toggleExtensionVal,expression:"toggleExtensionVal"}],staticClass:"ui-br-ext-extension ui-br-ext-alwaysOn",staticStyle:{outline:"none !important"},attrs:{id:"ui-br-ext-extension"}},[r("MainMenu",{on:{"toggle-drop":e.toggleDrop,"toggle-extension":e.toggleExtension}}),r("Dropdown",{attrs:{dropToToggle:e.dropToToggle},on:{"toggle-extension":e.toggleExtension}}),r("Modal"),r("div",{staticClass:"ui-br-ext-toast",class:{"ui-br-ext-toast-width":e.showToast}},[r("div",{staticClass:"ui-br-ext-toast-container"},[r("div",{staticClass:"ui-br-ext-toast-body",class:{"ui-br-ext-toast-show":e.showToast,"ui-br-ext-bg-danger":e.dangerToast}},[r("div",{staticClass:"ui-br-ext-toast-text"},[e._v(e._s(e.toastText))]),r("div",{staticClass:"ui-br-ext-toast-close",on:{click:e.hideToast}})])])]),r("a",{staticStyle:{display:"none"},attrs:{href:"",id:"ui-br-ext-download-image-full"}}),r("a",{staticStyle:{display:"none"},attrs:{download:"message.eml",id:"ui-br-ext-download-email"}})],1)}),l=[],d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-header",staticStyle:{outline:"none !important"},attrs:{id:"ui-br-ext-header"},on:{mousedown:e.onMouseDown,touchstart:e.onTouchStart}},[r("div",{staticClass:"ui-br-ext-menu-container ui-br-ext-container ui-br-ext-alwaysOn"},[e.videoMode?e._e():[r("SelectBtn",{attrs:{toggleCompleted:e.toggleCompleted},on:{"toggle-button":e.toggleButton,"toggle-extension":function(t){return e.$emit("toggle-extension")}}}),r("ReportBugBtn",{attrs:{toggleCompleted:e.toggleCompleted},on:{"toggle-button":e.toggleButton}}),r("ReviewBtn",{attrs:{toggleCompleted:e.toggleCompleted},on:{"toggle-button":e.toggleButton}}),r("VideoBtn",{attrs:{toggleCompleted:e.toggleCompleted},on:{"toggle-button":e.toggleButton}}),r("SettingsBtn",{attrs:{toggleCompleted:e.toggleCompleted},on:{"toggle-button":e.toggleButton}}),r("CloseBtn",{on:{"toggle-button":e.toggleButton}})],e.videoMode?[r("VideoRecord",{on:{"toggle-video-drop":e.toggleVideoDrop}})]:e._e()],2)])},m=[],p=(r("d3b7"),r("ac1f"),r("5319"),r("159b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{ref:"selectButton",staticClass:"ui-br-ext-operator ui-br-ext-alwaysOn",attrs:{"data-title":"Select",id:"ui-br-ext-select-button"},on:{click:e.toggleBtn}},[r("svg",{staticClass:"ui-br-ext-feather feather-mouse-pointer",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("path",{attrs:{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}}),r("path",{attrs:{d:"M13 13l6 6"}})])])}),v=[],h=(r("a15b"),r("99af"),r("caad"),r("2532"),function(e){return x(e)}),g=function(e){return w(e)},f=function(){var e=document.querySelector("body");e.addEventListener("mouseover",h),e.addEventListener("mouseout",g)},b=function(){var e=document.querySelector("body");e.removeEventListener("mouseover",h),e.removeEventListener("mouseout",g)},x=function(e){e.target.classList.value.includes("ui-br-ext-")||e.target.classList.add("ui-br-ext-hovered")},w=function(e){e.target.classList.remove("ui-br-ext-hovered")},y={hoverOn:h,hoverOff:g,addHover:f,removeHover:b,hoverOnHandler:x,hoverOffHandler:w},C=new o["a"],k=C,j=function(e){e||(e=document.querySelectorAll("body > *:not(#ui-br-ext-extension):not(script):not(noscript):not(style)")),e.forEach((function(e){e.addEventListener("click",R,{capture:!0}),e.addEventListener("mousedown",R,{capture:!0}),e.addEventListener("mouseup",R,{capture:!0}),e.addEventListener("dblclick",R,{capture:!0})}))},_=function(e){e||(e=document.querySelectorAll("body > *:not(#ui-br-ext-extension):not(script):not(noscript):not(style)")),e.forEach((function(e){e.removeEventListener("click",R,!0),e.removeEventListener("mousedown",R,!0),e.removeEventListener("mouseup",R,!0),e.addEventListener("dblclick",R,{capture:!0}),e.classList.remove("ui-br-ext-outlined-element"),e.classList.remove("ui-br-ext-selected-element-outline-green"),e.classList.remove("ui-br-ext-selected-element-outline-red")}))},R=function(e){return E(e)},E=function(e){return e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),!1},S={preventClick:R,addClickBlocker:j,removeClickBlocker:_,preventClickHandler:E},P={element:null,parentCount:0},I=5,A=function(){var e="",t="*{\n        -webkit-tap-highlight-color: transparent;\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -khtml-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n      }",r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("id","ui-br-ext-extension-style"),r.appendChild(n),n.type="text/css",n.styleSheet?n.styleSheet.cssText=e+t:n.appendChild(document.createTextNode(e+t)),B(O)},$=function(){var e;null===(e=document.getElementById("ui-br-ext-extension-style"))||void 0===e||e.remove(),M(O),document.querySelectorAll(".ui-br-ext-outlined-element").forEach((function(e){e.classList.remove("ui-br-ext-outlined-element"),e.classList.remove("ui-br-ext-selected-element-outline-red"),e.classList.remove("ui-br-ext-selected-element-outline-green"),e.removeAttribute("data-ext-index")})),P&&(P.element=null,P.parentCount=0),U(!1),T()},T=function(){var e=document.querySelectorAll(".ui-br-ext-bug-cover");e.forEach((function(e){e.remove()}))},B=function(e){var t=document.getElementsByTagName("html")[0];t.addEventListener("mousedown",e,!0),S.addClickBlocker(),y.addHover()},M=function(e){var t=document.getElementsByTagName("html")[0];t.removeEventListener("mousedown",e,!0),S.removeClickBlocker(),y.removeHover()},O=function(e){if(e){var t=e.clientX,r=e.clientY;D(t,r)}},D=function(e,t){var r,n,o,i,s=document.elementFromPoint(e,t),a=document.elementFromPoint(e,t);if(s&&null!==P.element&&P.parentCount<I&&null===(null===(r=s)||void 0===r?void 0:r.closest("#ui-br-ext-extension"))){var c=P.element.getBoundingClientRect(),u=c.top,l=c.left,d=s.getBoundingClientRect(),m=d.top,p=d.left;if(u===m&&l===p){for(var v=null,h=!1,g=1;g<I;g++){var f;if(v=null!==v?v.parentElement:s.parentElement,null!==(f=v)&&void 0!==f&&f.classList.contains("ui-br-ext-outlined-element")){h=!0,P.parentCount++;break}}h||P.parentCount++,s=h?v.parentElement:s.parentElement}}P.element=a,"body"!=(null===(n=s)||void 0===n?void 0:n.tagName.toLocaleLowerCase())&&"html"!=(null===(o=s)||void 0===o?void 0:o.tagName.toLocaleLowerCase())&&null===(null===(i=s)||void 0===i?void 0:i.closest("#ui-br-ext-extension"))&&(F(s),U(!0),Gi.store.selectedElement=s,Gi.store.selectedElementRect=s.getBoundingClientRect()),P.parentCount===I&&(P.element=null,P.parentCount=0)},F=function(e){document.querySelectorAll(".ui-br-ext-outlined-element").forEach((function(e){e.classList.remove("ui-br-ext-outlined-element"),e.classList.remove("ui-br-ext-selected-element-outline-green"),e.classList.remove("ui-br-ext-selected-element-outline-red")})),e.classList.add("ui-br-ext-outlined-element"),e.classList.add("ui-br-ext-selected-element-outline-red")},U=function(e){var t=document.getElementById("ui-br-ext-report-bug-button");t.style.display=e?t.classList.remove("ui-br-ext-report-bug-inactive"):t.classList.add("ui-br-ext-report-bug-inactive")},L=function(e){for(var t,r=e.getBoundingClientRect(),n=document.getElementsByTagName("*"),o=[],i=null,s=null;e&&1==e.nodeType;e=e.parentNode){var a=!1;if(e.hasAttribute("id")){for(var c=0;c<n.length;c++)if(n[c].hasAttribute("id")&&n[c].id==e.id){var u;o.unshift('//*[@id="'+e.getAttribute("id")+'"]'),i=null!==(u=o.join("/"))&&void 0!==u?u:null,a=!0,s=!0;break}}else{var l=void 0;for(l=1,t=e.previousSibling;t;t=t.previousSibling)t.localName==e.localName&&l++;o.unshift(e.localName.toLowerCase()+"["+l+"]")}if("html"===e.localName.toLowerCase()||a)break}if(null==i&&(i=o.length?"/"+o.join("/"):null),s){var d=document.evaluate(i,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);if(d&&d.snapshotLength>1)for(var m=0;m<d.snapshotLength;m++){var p=d.snapshotItem(m),v=p.getBoundingClientRect();if(r.left==v.left&&r.right==v.right){i="(".concat(i,")[").concat(m+1,"]");break}}}return i},K={getElementXpath:L,displayReportBugButton:U,outlineSelectedElement:F,findElementFromPoint:D,getMouseCoordinates:O,removeClickFromBody:M,addClickToHtml:B,onDeselect:$,onSelect:A,ui_br_ext_previousElement:P,ui_br_ext_parentLimit:I},N=function(e){var t=document.getElementsByClassName("ui-br-ext-active")[0],r=e.id;return("ui-br-ext-select-button"!==(null===t||void 0===t?void 0:t.id)||"ui-br-ext-select-button"===(null===t||void 0===t?void 0:t.id)&&"ui-br-ext-select-button"===r||"ui-br-ext-select-button"===(null===t||void 0===t?void 0:t.id)&&"ui-br-ext-report-bug-button"!==r)&&V(),Q(e)},Q=function(e){var t=!1,r=e.classList;return r.contains("ui-br-ext-active")?(e.classList.remove("ui-br-ext-active"),t=!1):(document.querySelectorAll(".ui-br-ext-operator").forEach((function(e){e.classList.remove("ui-br-ext-active")})),e.classList.add("ui-br-ext-active"),t=!0),t},V=function(){K.onDeselect(),z()},J=function(e){document.getElementById(e).classList.add("ui-br-ext-active")},z=function(){document.querySelectorAll(".ui-br-ext-extension .ui-br-ext-dropdown-item").forEach((function(e){e.classList.remove("ui-br-ext-active")}))},X=function(){K.onSelect()},q=function(){K.removeClickFromBody(K.getMouseCoordinates)},Y={activateOperator:N,resetAllOperators:V,setOperatorIconStyle:Q,openDropdown:J,closeDropdown:z,onSelect:X,removeClickFromBodyOnReport:q},G=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return document.querySelector("body").classList.add("ui-br-ext-hide-hovered"),e.next=3,H(100);case 3:return e.abrupt("return",new Promise((function(e,t){chrome.runtime.sendMessage({todo:"getImage"},(function(r){r.imgSrc?(e(r.imgSrc),document.querySelector("body").classList.remove("ui-br-ext-hide-hovered")):(t(),document.querySelector("body").classList.remove("ui-br-ext-hide-hovered"))}))})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},W=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.bugReportextension.screenshot){e.next=4;break}return e.next=3,G();case 3:window.bugReportextension.screenshot=e.sent;case 4:ee("ui-br-ext-download-image-full",window.bugReportextension.screenshot,"full_screenshot");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=550,t=window.matchMedia("(max-width: 1023px)"),r=window.matchMedia("(max-width: 767px)");return r.matches&&(e=window.innerWidth-.25*window.innerWidth),t.matches&&(e=window.innerWidth-.45*window.innerWidth),e},ee=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r,n){var o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=document.getElementById(t),i="image/png",o.download=n,o.href=r,o.dataset.downloadurl=[i,o.download,o.href].join(":"),o.click();case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),te={getScreenshot:G,setDelay:H,imageDownload:W,screenshotLink:ee,getQueryWidth:Z},re={name:"SelectBtn",props:["toggleCompleted"],created:function(){this.onSelect=Y.onSelect,this.onGetScreenshot=te.getScreenshot},mounted:function(){window.selectButtonComponent=this},data:function(){return{next:!1}},methods:{toggleBtn:function(e){this.toggleEmit(e.currentTarget),Gi.store.dynamicDomFlow=!1},toggleEmit:function(e){var t=this;this.$emit("toggle-button",e),this.$nextTick((function(){t.toggleCompleted&&t.onSelect()}))},toggleSelectButton:function(){this.toggleEmit(this.$refs.selectButton),Gi.store.dynamicDomFlow=!0},getScreenshot:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("toggle-extension"),t.next=3,e.onGetScreenshot();case 3:Gi.store.screenshot=t.sent,e.$emit("toggle-extension");case 5:case"end":return t.stop()}}),t)})))()}}},ne=re,oe=r("2877"),ie=Object(oe["a"])(ne,p,v,!1,null,null,null),se=ie.exports,ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"ui-br-ext-operator ui-br-ext-alwaysOn ui-br-ext-report-bug-inactive",attrs:{"data-title":"Report bug",id:"ui-br-ext-report-bug-button"},on:{click:e.toggleBtn}},[r("svg",{staticClass:"feather feather-file-plus",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("path",{attrs:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}}),r("polyline",{attrs:{points:"14 2 14 8 20 8"}}),r("line",{attrs:{x1:"12",y1:"18",x2:"12",y2:"12"}}),r("line",{attrs:{x1:"9",y1:"15",x2:"15",y2:"15"}})])])},ce=[],ue={name:"ReportBugBtn",props:["toggleCompleted"],created:function(){},data:function(){return{next:!1}},methods:{toggleBtn:function(e){this.$emit("toggle-button",e.currentTarget),this.moveElementToViewport()},moveElementToViewport:function(){if(!Gi.store.selectedElement)return!1;var e=this.isElementInViewport(Gi.store.selectedElement);e||Gi.store.selectedElement.scrollIntoView({behavior:"smooth",inline:"center",block:"center"})},isElementInViewport:function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}}},le=ue,de=Object(oe["a"])(le,ae,ce,!1,null,null,null),me=de.exports,pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"ui-br-ext-operator ui-br-ext-alwaysOn",attrs:{"data-title":"Review",id:"ui-br-ext-review-button"},on:{click:e.toggleBtn}},[r("svg",{staticClass:"feather feather-file-text",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("path",{attrs:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}}),r("polyline",{attrs:{points:"14 2 14 8 20 8"}}),r("polyline",{attrs:{points:"10 9 9 9 8 9"}}),r("line",{attrs:{x1:"16",y1:"13",x2:"8",y2:"13"}}),r("line",{attrs:{x1:"16",y1:"17",x2:"8",y2:"17"}})])])},ve=[],he={name:"ReviewBtn",props:["toggleCompleted"],data:function(){return{next:!1}},methods:{toggleBtn:function(e){this.$emit("toggle-button",e.currentTarget)}}},ge=he,fe=Object(oe["a"])(ge,pe,ve,!1,null,null,null),be=fe.exports,xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"ui-br-ext-operator ui-br-ext-alwaysOn",attrs:{"data-title":"Screen Record",id:"ui-br-ext-video-button"},on:{click:e.toggleBtn}},[r("svg",{staticClass:"ui-br-ext-feather feather-video",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("polygon",{attrs:{points:"23 7 16 12 23 17 23 7"}}),r("rect",{attrs:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}})])])},we=[],ye={name:"VideoBtn",props:["toggleCompleted"],created:function(){},data:function(){return{next:!1}},methods:{toggleBtn:function(e){this.$emit("toggle-button",e.currentTarget),this.$emit("start-record")}}},Ce=ye,ke=Object(oe["a"])(Ce,xe,we,!1,null,null,null),je=ke.exports,_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"ui-br-ext-operator ui-br-ext-alwaysOn",attrs:{"data-title":"Settings",id:"ui-br-ext-settings-button"},on:{click:e.toggleBtn}},[r("svg",{staticClass:"ui-br-ext-feather feather-settings",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"12",cy:"12",r:"3"}}),r("path",{attrs:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}})])])},Re=[],Ee={name:"SettingsBtn",props:["toggleCompleted"],created:function(){},data:function(){return{next:!1}},methods:{toggleBtn:function(e){this.$emit("toggle-button",e.currentTarget)}}},Se=Ee,Pe=Object(oe["a"])(Se,_e,Re,!1,null,null,null),Ie=Pe.exports,Ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"ui-br-ext-operator ui-br-ext-alwaysOn",attrs:{"data-title":"Close",id:"ui-br-ext-close-button"},on:{click:e.toggleBtn}},[r("svg",{staticClass:"ui-br-ext-feather feather-x",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#f04242","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("line",{attrs:{x1:"18",y1:"6",x2:"6",y2:"18"}}),r("line",{attrs:{x1:"6",y1:"6",x2:"18",y2:"18"}})])])},$e=[],Te={name:"CloseBtn",props:["toggleCompleted"],data:function(){return{next:!1}},methods:{toggleBtn:function(e){this.$emit("toggle-button",e.currentTarget)}}},Be=Te,Me=Object(oe["a"])(Be,Ae,$e,!1,null,null,null),Oe=Me.exports,De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-video-recorder"},[r("StopBtn",{on:{"stop-record":e.onStopRecord,"start-record":e.onStartRecord}}),r("div",{staticClass:"ui-br-ext-video-timer"},[r("div",{style:{width:e.width+"%"}})]),r("span",{staticClass:"ui-br-ext-message"},[e._v(e._s(e.error))]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.onPreview,expression:"onPreview"}],staticClass:"ui-br-ext-preview"},[r("div",{staticClass:"ui-br-ext-video-box"},[r("div",{staticClass:"ui-br-ext-close",on:{click:e.stopPreview}},[r("svg",{staticClass:"feather feather-x",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#f7f7f7","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("line",{attrs:{x1:"18",y1:"6",x2:"6",y2:"18"}}),r("line",{attrs:{x1:"6",y1:"6",x2:"18",y2:"18"}})])]),r("video",{ref:"playVideoCapture",attrs:{src:e.video,controls:""}})])])],1)},Fe=[],Ue=r("2909"),Le=(r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),r("2ca0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.recording?r("span",{staticClass:"ui-br-ext-operator ui-br-ext-alwaysOn",attrs:{"data-title":"Stop Record",id:"ui-br-ext-stop-button"},on:{click:e.stopRecord}},[r("svg",{staticClass:"ui-br-ext-feather ui-bt-ext-stop-button feather-stop-circle",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#e04414","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),r("rect",{attrs:{x:"9",y:"9",width:"6",height:"6"}})])]):e._e(),e.recording?e._e():r("span",{staticClass:"ui-br-ext-operator ui-br-ext-alwaysOn",attrs:{"data-title":"Start Record",id:"ui-br-ext-stop-button"},on:{click:e.startRecord}},[r("svg",{staticClass:"feather feather-play-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#00ad55","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),r("polygon",{attrs:{points:"10 8 16 12 10 16 10 8"}})])])])}),Ke=[],Ne={name:"StopBtn",props:["toggleCompleted"],mounted:function(){k.$on("permission-denied",this.stopRecord),k.$on("click-stop",this.stopRecord),window.stopRecordButton=this},data:function(){return{next:!1,disabled:!1,recording:!0}},methods:{stopRecord:function(){this.recording=!1,this.$emit("stop-record")},startRecord:function(){this.$emit("start-record"),this.recording=!0}}},Qe=Ne,Ve=Object(oe["a"])(Qe,Le,Ke,!1,null,null,null),Je=Ve.exports,ze={name:"VideoRecord",components:{StopBtn:Je},created:function(){},mounted:function(){this.startRecord(),k.$on("preview",this.preview),k.$on("download",this.saveFile),k.$on("upload",this.upload)},data:function(){return{time:0,timer:void 0,width:1,onPreview:!1,mediaRecorder:void 0,recordedChunks:[],mimeType:"video/webm",video:"",error:"",startTime:void 0}},methods:{startRecord:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.recordedChunks=[],t.prev=1,t.next=4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});case 4:return r=t.sent,t.next=7,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 7:n=t.sent,e.startTime=Math.round(Date.now()/1e3),chrome.runtime.sendMessage({todo:"setAlarm"}),o=[].concat(Object(Ue["a"])(r.getTracks()),Object(Ue["a"])(n.getAudioTracks())),i=new MediaStream(o),e.mediaRecorder=e.createRecorder(i),t.next=23;break;case 15:t.prev=15,t.t0=t["catch"](1),console.log(t.t0.message),chrome.runtime.sendMessage({todo:"clearAlarm"}),e.error=t.t0.message,k.$emit("permission-denied"),e.time=0,e.width=0;case 23:case"end":return t.stop()}}),t,null,[[1,15]])})))()},stopRecord:function(){this.mediaRecorder.stop()},createRecorder:function(e){var t=this,r={mimeType:"video/webm;codecs=h264"},n=new MediaRecorder(e,r);return n.ondataavailable=function(e){e.data.size>0&&t.recordedChunks.push(e.data)},n.onstart=function(){t.timer=setInterval(t.timerBody,600)},n.onstop=function(){e.getTracks().forEach((function(e){return e.stop()}))},n.start(200),n},saveFile:function(){var e=new Blob(this.recordedChunks,{type:"video/mp4"}),t=document.getElementById("uiExtBrDownloadVideo");t.download="reportbug.mp4",t.href=URL.createObjectURL(e),t.click(),URL.revokeObjectURL(e)},onStopRecord:function(){clearInterval(this.timer),chrome.runtime.sendMessage({todo:"clearAlarm"}),this.startTime=0,this.$emit("toggle-video-drop",!0),this.mediaRecorder&&this.mediaRecorder.stop()},onStartRecord:function(){this.error="",this.time=0,this.width=0,this.$emit("toggle-video-drop",!1),this.startRecord()},timerBody:function(){this.width++,this.time=Math.round(Date.now()/1e3)-this.startTime,100==this.time&&(this.startTime=0,chrome.runtime.sendMessage({todo:"clearAlarm"}),k.$emit("click-stop"))},preview:function(){this.onPreview=!0;var e,t=this.$refs.playVideoCapture,r=new Blob(this.recordedChunks,{type:"video/webm"}),n=URL.createObjectURL(r);t&&t.currentSrc&&(e=t.currentSrc),e&&e.startsWith("blob:")&&(t.src="",URL.revokeObjectURL(e)),t.src=n},stopPreview:function(){var e=this.$refs.playVideoCapture;e.pause(),this.onPreview=!1}}},Xe=ze,qe=Object(oe["a"])(Xe,De,Fe,!1,null,null,null),Ye=qe.exports,Ge={name:"MainMenu",components:{SelectBtn:se,ReportBugBtn:me,ReviewBtn:be,VideoBtn:je,SettingsBtn:Ie,CloseBtn:Oe,VideoRecord:Ye},created:function(){this.activateOperator=Y.activateOperator,this.onDeselect=K.onDeselect,this.removeClickFromBodyOnReport=Y.removeClickFromBodyOnReport},mounted:function(){var e=this;k.$on("toggle-video-drop",(function(t){e.toggleVideoDrop(t.drop),e.videoMode=t.videoMode})),k.$on("toggle-bug-drop",(function(t){e.collapseBugDrop(t.state),t.toggleReportDetails&&e.toggleBugDetail(t.toggleReportDetails)}))},data:function(){return{toggleCompleted:!1,positions:{clientX:void 0,clientY:void 0,movementX:0,movementY:0},videoMode:!1}},methods:{toggleButton:function(e){document.body.classList.remove("ui-br-ext-freeze"),"ui-br-ext-close-button"==e.id?(this.onDeselect(),window.destroyeUibrextInstance()):(this.toggleCompleted=this.activateOperator(e),this.toggleDrops(e.id,this.toggleCompleted),"ui-br-ext-report-bug-button"==e.id&&(this.removeClickFromBodyOnReport(),document.body.classList.add("ui-br-ext-freeze")))},toggleDrops:function(e,t){e=e.replace("ui-br-ext-","").replace(/-/g,"").replace("button",""),"video"==e&&(t=!1),this.$emit("toggle-drop",{id:e,state:t}),"video"==e&&(this.videoMode=!0)},onMouseDown:function(e){e.preventDefault(),this.positions.clientX=e.clientX,this.positions.clientY=e.clientY,document.onmousemove=this.elementDrag,document.onmouseup=this.closeDragElement},elementDrag:function(e){e.preventDefault();var t=document.getElementById("ui-br-ext-extension");this.positions.movementX=this.positions.clientX-e.clientX,this.positions.movementY=this.positions.clientY-e.clientY,this.positions.clientX=e.clientX,this.positions.clientY=e.clientY,e.clientY>0&&e.clientY<window.innerHeight&&(t.style.top=t.offsetTop-this.positions.movementY+"px"),e.clientX>0&&e.clientX<window.innerWidth&&(t.style.left=t.offsetLeft-this.positions.movementX+"px")},closeDragElement:function(){document.onmouseup=null,document.onmousemove=null,document.ontouchend=null,document.ontouchmove=null},onTouchStart:function(e){if("ui-br-ext-header"==e.target.id){e.preventDefault(),e.stopPropagation();var t=e.touches[0];this.positions.clientX=t.clientX,this.positions.clientY=t.clientY,document.ontouchmove=this.onTouchMove,document.ontouchend=this.closeDragElement}},onTouchMove:function(e){e.stopPropagation();var t=e.touches[0],r=document.getElementById("ui-br-ext-extension");this.positions.movementX=this.positions.clientX-t.clientX,this.positions.movementY=this.positions.clientY-t.clientY,this.positions.clientX=t.clientX,this.positions.clientY=t.clientY,t.clientY>0&&t.clientY<window.innerHeight&&(r.style.top=r.offsetTop-this.positions.movementY+"px"),t.clientX>0&&t.clientX<window.innerWidth&&(r.style.left=r.offsetLeft-this.positions.movementX+"px")},toggleVideoDrop:function(e){this.$emit("toggle-drop",{id:"video",state:e})},toggleBugDetail:function(e){this.$emit("toggle-drop",{id:"review",state:!0}),k.$emit("show-details",e)},collapseBugDrop:function(e){this.$emit("toggle-drop",{id:"report-bug",state:e}),document.body.classList.remove("ui-br-ext-freeze");var t=document.getElementById("ui-br-ext-report-bug-button"),r=document.querySelectorAll(".ui-br-ext-outlined-element");t.classList.add("ui-br-ext-report-bug-inactive"),r.forEach((function(e){e.classList.remove("ui-br-ext-outlined-element"),e.classList.remove("ui-br-ext-selected-element-outline-red"),e.classList.remove("ui-br-ext-selected-element-outline-green"),e.removeAttribute("data-ext-index")}))}}},He=Ge,We=Object(oe["a"])(He,d,m,!1,null,null,null),Ze=We.exports,et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-container ui-br-ext-dropdown"},[e.drops.reportbug?r("ReportBugDrop",{on:{"toggle-extension":function(t){return e.$emit("toggle-extension")}}}):e._e(),e.drops.settings?r("SettingsDrop"):e._e(),e.drops.review?r("ReviewDrop",{on:{"toggle-extension":function(t){return e.$emit("toggle-extension")}}}):e._e(),e.drops.video?r("VideoRecordDrop"):e._e()],1)},tt=[],rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"divToResize",staticClass:"ui-br-ext-dropdown-item ui-br-ext-report-bug",attrs:{id:"ui-br-ext-report-bug"}},[r("div",{staticClass:"ui-br-ext-drop-title"},[e._v("Report bug")]),r("div",{staticClass:"ui-br-ext-drop-body"},[r("UserDetails",{attrs:{user:e.user}}),r("div",{staticClass:"ui-br-ext-spacer-3"}),r("ReportForm",{ref:"reportForm",attrs:{validation:e.saveToDb},on:{"save-bug-to-storage":e.saveBugToStorage,"set-project-from-unsaved-report":e.setProjectFromUnsavedReport}}),r("FileUpload",{ref:"fileUploadForm",attrs:{account:e.account}})],1),e.account&&e.account.token?r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.saveToDb,expression:"saveToDb"}],attrs:{type:"checkbox",name:"jira",id:"ui-br-ext-save-to-jira"},domProps:{checked:Array.isArray(e.saveToDb)?e._i(e.saveToDb,null)>-1:e.saveToDb},on:{change:function(t){var r=e.saveToDb,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&(e.saveToDb=r.concat([i])):s>-1&&(e.saveToDb=r.slice(0,s).concat(r.slice(s+1)))}else e.saveToDb=o}}}),r("label",{attrs:{for:"ui-br-ext-save-to-jira"}},[e._v("Save to DB")])]):e._e(),e.project&&e.project.jiraId?r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.report.saveToJira,expression:"report.saveToJira"}],attrs:{type:"checkbox",name:"jira",id:"ui-br-ext-save-to-jira"},domProps:{checked:Array.isArray(e.report.saveToJira)?e._i(e.report.saveToJira,null)>-1:e.report.saveToJira},on:{change:function(t){var r=e.report.saveToJira,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&e.$set(e.report,"saveToJira",r.concat([i])):s>-1&&e.$set(e.report,"saveToJira",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(e.report,"saveToJira",o)}}}),r("label",{attrs:{for:"ui-br-ext-save-to-jira"}},[e._v("Create Jira ticket on save")])]):e._e(),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.report.savePdf,expression:"report.savePdf"}],attrs:{type:"checkbox",name:"pdf",id:"ui-br-ext-save-to-pdf"},domProps:{checked:Array.isArray(e.report.savePdf)?e._i(e.report.savePdf,null)>-1:e.report.savePdf},on:{change:function(t){var r=e.report.savePdf,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&e.$set(e.report,"savePdf",r.concat([i])):s>-1&&e.$set(e.report,"savePdf",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(e.report,"savePdf",o)}}}),r("label",{attrs:{for:"ui-br-ext-save-to-pdf"}},[e._v("Save as PDF")])]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.report.sendEmail,expression:"report.sendEmail"}],attrs:{type:"checkbox",name:"pdf",id:"ui-br-ext-send-email"},domProps:{checked:Array.isArray(e.report.sendEmail)?e._i(e.report.sendEmail,null)>-1:e.report.sendEmail},on:{change:function(t){var r=e.report.sendEmail,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&e.$set(e.report,"sendEmail",r.concat([i])):s>-1&&e.$set(e.report,"sendEmail",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(e.report,"sendEmail",o)}}}),r("label",{attrs:{for:"ui-br-ext-send-email"}},[e._v("Generate email")])]),r("div",{staticClass:"ui-br-ext-btn-group"},[r("button",{staticClass:"ui-br-ext-btn",attrs:{id:"ui-br-ext-save-report","data-listener":"off"},on:{click:e.downloadScreenshot}},[r("span",[e._v("Download screenshot")])]),r("button",{staticClass:"ui-br-ext-btn",class:{disabled:e.submitInPorgress},attrs:{id:"ui-br-ext-save-report","data-listener":"off",disabled:e.submitInPorgress},on:{click:e.getForm}},[r("span",{staticClass:"ui-br-ext-spinner",class:{active:e.submitInPorgress}}),r("span",[e._v("Save report")])]),r("button",{staticClass:"ui-br-ext-btn-danger",attrs:{"data-listener":"off"},on:{click:e.cancel}},[r("span",[e._v("Cancel")])])]),r("Resize",{attrs:{elementId:e.elementId}}),r("a",{ref:"downloadImageFull",staticStyle:{display:"none !important"},attrs:{href:""}})],1)},nt=[],ot=(r("e9c4"),r("b0c0"),r("a4d3"),r("e01a"),r("bc3a")),it=r.n(ot),st=function(e,t){var r="https://extension-service.evendor.app/api";return t&&t.token&&(r=t.repositoryServer),new Promise((function(t,n){it.a.post("".concat(r,"/generate_pdf"),{project:e.project.projectKey,module:e.module.name,environment:e.environment.name,title:e.title,actualResult:e.actualResult,description:e.description,stepsToReproduce:e.stepsToReproduce,expectedResult:e.expectedResult,xpath:e.xpath,screenshot:e.screenshot,url:window.location.href}).then((function(e){t(e.data.result)})).catch((function(e){console.log(e.reponse),n(e.response.data)}))}))},at={getPdf:st},ct=(r("25f0"),r("fb6a"),function(e){var t=ut();return e&&e.name?e.name+"_"+t:"BugReport_"+t}),ut=function(){var e=Date.now().toString();return e.slice(-6)},lt={getFileName:ct,getDate:ut},dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"ui-br-ext-info-list"},[e.user&&(e.user.firstname||e.user.lastname)?r("li",[e._m(0),r("span",[e._v(" "+e._s(e.user.firstname)+" "+e._s(e.user.lastname))])]):e._e(),e.user&&e.user.email?r("li",[e._m(1),r("span",[e._v(" "+e._s(e.user.email))])]):e._e()])},mt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("strong",[e._v("User: ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("strong",[e._v("Email: ")])])}],pt={name:"UserDetails",props:["user"]},vt=pt,ht=Object(oe["a"])(vt,dt,mt,!1,null,null,null),gt=ht.exports,ft=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-box-resize",attrs:{id:"ui-br-comment-boxResize"},on:{mousedown:e.onMouseDown,touchstart:e.onTouchStart}},[r("svg",{attrs:{version:"1.1",viewBox:"0 0 36 36",preserveAspectRatio:"xMidYMid meet",focusable:"false",role:"img",width:"128",height:"128",fill:"currentColor"}},[r("path",{staticClass:"ui-br-ext-clr-i-outline clr-i-outline-path-1",attrs:{d:"M33,11H3a1,1,0,0,0,0,2H33a1,1,0,0,0,0-2Z"}}),r("path",{staticClass:"ui-br-ext-clr-i-outline clr-i-outline-path-2",attrs:{d:"M28,17H8a1,1,0,0,0,0,2H28a1,1,0,0,0,0-2Z"}}),r("path",{staticClass:"ui-br-ext-clr-i-outline clr-i-outline-path-3",attrs:{d:"M23,23H13a1,1,0,0,0,0,2H23a1,1,0,0,0,0-2Z"}})])])},bt=[],xt={},wt=function(e,t){e.preventDefault(),n=document.getElementById(t),xt.width=n.getBoundingClientRect().width,xt.height=n.getBoundingClientRect().height,xt.clientX=e.clientX,xt.clientY=e.clientY,xt.element=n,document.onmousemove=Ct,document.onmouseup=jt},yt=function(e){e.preventDefault(),e.stopPropagation();var t=e.touches[0];xt.width=n.getBoundingClientRect().width,xt.height=n.getBoundingClientRect().height,xt.clientX=t.clientX,xt.clientY=t.clientY,document.ontouchmove=kt,document.ontouchend=jt,n=void 0},Ct=function(e){e.preventDefault(),xt.resizeX=xt.width+(e.clientX-xt.clientX),xt.resizeX>350&&(xt.element.style.width=xt.resizeX+"px"),xt.resizeY=xt.height+(e.clientY-xt.clientY),xt.resizeY>200&&(xt.element.style.height=xt.resizeY+"px")},kt=function(e){var t=e.touches[0];xt.resizeX=xt.width+(t.clientX-xt.clientX),xt.resizeX>250&&xt.resizeX<330&&(xt.element.style.width=xt.resizeX+"px"),xt.resizeY=xt.height+(t.clientY-xt.clientY),xt.resizeY>200&&(xt.element.style.height=xt.resizeY+"px")},jt=function(){document.onmouseup=null,document.onmousemove=null,document.ontouchend=null,document.ontouchmove=null},_t={onMouseDown:wt,setInitialSize:Ct,closeElementResize:jt,onTouchResize:kt,onTouchStart:yt},Rt={name:"Resize",props:["elementId"],data:function(){return{element:void 0}},created:function(){this.mouseMove=_t.onMouseDown,this.touchMove=_t.onTouchStart},methods:{onMouseDown:function(e){this.mouseMove(e,this.elementId)},onTouchStart:function(e){"ui-br-comment-boxResize"==e.path[1]["id"]&&this.touchMove(e)}}},Et=Rt,St=Object(oe["a"])(Et,ft,bt,!1,null,null,null),Pt=St.exports,It=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"ui-br-ext-report-form",attrs:{autocomplete:"off"}},[r("ProjectSearch",{ref:"projectForm",attrs:{account:e.account,validation:e.validation,oldProject:e.project}}),r("ModuleSearch",{ref:"moduleForm",attrs:{account:e.account,project:e.project,validation:e.validation,oldModule:e.module}}),r("EnvironmentSearch",{ref:"environmentForm",attrs:{account:e.account,validation:e.validation,oldEnvironment:e.environment}}),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-title"}},[e._v("Summary:")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.title,expression:"form.title"}],attrs:{name:"ui-br-ext-title",rows:"1","data-gramm":"false",maxlength:"100"},domProps:{value:e.form.title},on:{blur:e.saveToStorage,input:function(t){t.target.composing||e.$set(e.form,"title",t.target.value)}}}),e.count>0&&""==e.form.title?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e()]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-description"}},[e._v("Description")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.description,expression:"form.description"}],attrs:{name:"ui-br-ext-description",rows:"2","data-gramm":"false",maxlength:"1000"},domProps:{value:e.form.description},on:{blur:e.saveToStorage,input:function(t){t.target.composing||e.$set(e.form,"description",t.target.value)}}}),e.count>0&&""==e.form.description?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e()]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-act-results"}},[e._v("Actual results")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.actualResult,expression:"form.actualResult"}],attrs:{name:"ui-br-ext-act-results",rows:"3","data-gramm":"false",maxlength:"1000"},domProps:{value:e.form.actualResult},on:{blur:e.saveToStorage,input:function(t){t.target.composing||e.$set(e.form,"actualResult",t.target.value)}}}),e.count>0&&""==e.form.actualResult?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e()]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-exp-results"}},[e._v("Expected results")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.expectedResult,expression:"form.expectedResult"}],attrs:{name:"ui-br-ext-exp-results",rows:"3","data-gramm":"false",maxlength:"1000"},domProps:{value:e.form.expectedResult},on:{blur:e.saveToStorage,input:function(t){t.target.composing||e.$set(e.form,"expectedResult",t.target.value)}}}),e.count>0&&""==e.form.expectedResult?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e()]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-rep-steps"}},[e._v("Steps to reproduce")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.stepsToReproduce,expression:"form.stepsToReproduce"}],attrs:{name:"ui-br-ext-rep-steps",rows:"3","data-gramm":"false",maxlength:"1000"},domProps:{value:e.form.stepsToReproduce},on:{blur:e.saveToStorage,input:function(t){t.target.composing||e.$set(e.form,"stepsToReproduce",t.target.value)}}}),e.count>0&&""==e.form.stepsToReproduce?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e()])],1)},At=[],$t=r("3835"),Tt=(r("4fad"),r("498a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"ui-br-ext-report-form",attrs:{autocomplete:"off"}},[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-modules"}},[e._v("Environment")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",autocomplete:"off"},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},e.onSearch]}}),e.validation&&""!==e.searchQuery&&e.searchResults&&0==e.searchResults.length&&!e.environment.environmentId?r("span",{staticClass:"ui-br-ext-message"},[e._v("No environments found")]):e._e(),e.validation&&e.count>0&&""==e.searchQuery?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e(),r("span",{staticClass:"ui-br-ext-search-icon"},[r("svg",{staticClass:"feather feather-search",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#00ad55","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"11",cy:"11",r:"8"}}),r("line",{attrs:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}})])]),e.searchResults&&e.searchResults.length>0?r("div",{staticClass:"ui-br-ext-search-results"},[r("ul",e._l(e.searchResults.slice(0,10),(function(t){return r("li",{key:t.environmentId},[r("span",{staticClass:"ui-br-ext-module-label",on:{click:function(r){return e.onResultClick(t)}}},[e._v(e._s(t.name))])])})),0)]):e._e()])])}),Bt=[],Mt=function(e){return new Promise((function(t,r){it.a.post("".concat(e.repositoryServer,"/environment"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,name:e.name}).then((function(e){t(e.data)})).catch((function(e){r(e.response.data)}))}))},Ot=function(e){return new Promise((function(t,r){it.a.patch("".concat(e.repositoryServer,"/environment"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,name:e.name,environmentId:e.environmentId}).then((function(e){t(e.data)})).catch((function(e){console.log(e.response),r(e.response.data)}))}))},Dt=function(e,t){return new Promise((function(r,n){it.a.get("".concat(e.repositoryServer,"/environment"),{params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,query:t}}).then((function(e){r(e.data.result)})).catch((function(e){console.log(e.reponse),n(e.response.data)}))}))},Ft=function(e,t){return new Promise((function(r,n){it.a.delete("".concat(t.repositoryServer,"/environment"),{params:{registrationKey:t.registrationKey,token:t.token,uuid:t.uuid,environmentId:e}}).then((function(e){r(e.data)})).catch((function(e){console.log(e.reponse),n(e.response.data)}))}))},Ut={postEnvironment:Mt,patchEnvironment:Ot,getEnvironments:Dt,deleteEnvironment:Ft},Lt={name:"EnvironmentSearch",props:["oldEnvironment","validation","account"],mounted:function(){this.setFormValue(),this.get=Ut.getEnvironments},watch:{oldEnvironment:{handler:function(e,t){this.setFormValue()}}},data:function(){return{count:0,searchQuery:"",searchResults:[],environment:{name:"",environmentId:void 0}}},methods:{setFormValue:function(){var e,t;this.oldEnvironment&&(this.searchQuery=null!==(e=null===(t=this.oldEnvironment)||void 0===t?void 0:t.name)&&void 0!==e?e:"",this.environment=this.oldEnvironment)},resetReportData:function(){this.environment={}},formValidation:function(){return!!this.environment.environmentId||(this.count++,!1)},onSearch:function(){var e=this;if(!this.account||!this.account.token)return!1;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.searchQuery=e.searchQuery.trim(),e.searchQuery.length>=2?e.getEnvironments():e.searchResults=[],e.environment={}}),300)},getEnvironments:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""==e.searchQuery.length){t.next=11;break}return t.prev=1,t.next=4,e.get(e.account,e.searchQuery);case 4:e.searchResults=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0),null!==(r=t.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=t.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},onResultClick:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.searchQuery=e.name,t.searchResults=[],t.environment=e,t.count=0,t.$emit("setEnvironment",t.environment);case 5:case"end":return r.stop()}}),r)})))()}}},Kt=Lt,Nt=Object(oe["a"])(Kt,Tt,Bt,!1,null,null,null),Qt=Nt.exports,Vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"ui-br-ext-report-form",attrs:{autocomplete:"off"}},[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-modules"}},[e._v("Module")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",autocomplete:"off"},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},e.onSearch]}}),e.validation&&""!==e.searchQuery&&e.searchResults&&0==e.searchResults.length&&!e.module.moduleId?r("span",{staticClass:"ui-br-ext-message"},[e._v("No modules found")]):e._e(),e.validation&&e.count>0&&""==e.searchQuery?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e(),r("span",{staticClass:"ui-br-ext-search-icon"},[r("svg",{staticClass:"feather feather-search",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#00ad55","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"11",cy:"11",r:"8"}}),r("line",{attrs:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}})])]),e.searchResults&&e.searchResults.length>0?r("div",{staticClass:"ui-br-ext-search-results"},[r("ul",e._l(e.searchResults.slice(0,10),(function(t){return r("li",{key:t.moduleId},[r("span",{staticClass:"ui-br-ext-module-label",on:{click:function(r){return e.onResultClick(t)}}},[e._v(e._s(t.name))])])})),0)]):e._e()])])},Jt=[],zt=function(e){return e.saveToJira&&1,new Promise((function(t,r){it.a.post("".concat(e.repositoryServer,"/module"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,name:e.name,description:e.description,projectId:e.projectId}).then((function(e){t(e.data)})).catch((function(e){r(e.response.data)}))}))},Xt=function(e){return new Promise((function(t,r){it.a.patch("".concat(e.repositoryServer,"/module"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,name:e.name,description:e.description,projectId:e.projectId,lkModuleStatusId:e.lkModuleStatusId,moduleId:e.moduleId}).then((function(e){t(e.data)})).catch((function(e){r(e.response.data)}))}))},qt=function(e,t,r){return new Promise((function(n,o){it.a.get("".concat(e.repositoryServer,"/module"),{params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,query:t,projectId:r}}).then((function(e){n(e.data.result)})).catch((function(e){console.log(e.reponse),o(e.response.data)}))}))},Yt=function(e,t,r){return new Promise((function(r,n){it.a.delete("".concat(t.repositoryServer,"/module"),{params:{registrationKey:t.registrationKey,token:t.token,uuid:t.uuid,moduleId:e}}).then((function(e){r(e.data)})).catch((function(e){console.log(e.reponse),n(e.response.data)}))}))},Gt={postModule:zt,patchModule:Xt,getModules:qt,deleteModule:Yt},Ht={name:"ModuleSearch",props:["oldModule","validation","account","project"],mounted:function(){var e=this;this.setFormValue(),this.get=Gt.getModules,k.$on("projectChanged",(function(t){e.module={},e.searchQuery="",e.project.id=t.id}))},watch:{oldModule:{handler:function(e,t){this.setFormValue()}}},data:function(){return{count:0,searchQuery:"",searchResults:[],module:{name:"",moduleId:void 0}}},methods:{setFormValue:function(){var e,t;this.oldModule&&(this.searchQuery=null!==(e=null===(t=this.oldModule)||void 0===t?void 0:t.name)&&void 0!==e?e:"",this.module=this.oldModule)},resetReportData:function(){this.module={}},formValidation:function(){return!!this.module.moduleId||(this.count++,!1)},onSearch:function(){var e=this;if(!this.account||!this.account.token)return!1;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.searchQuery=e.searchQuery.trim(),e.searchQuery.length>=2?e.getmodules():e.searchResults=[],e.module={}}),300)},getmodules:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""==e.searchQuery.length){t.next=12;break}if(t.prev=1,!e.project.id){t.next=6;break}return t.next=5,e.get(e.account,e.searchQuery,e.project.id);case 5:e.searchResults=t.sent;case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0),null!==(r=t.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=t.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},onResultClick:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.searchQuery=e.name,t.searchResults=[],t.module=e,t.count=0,t.$emit("setmodule",t.module);case 5:case"end":return r.stop()}}),r)})))()}}},Wt=Ht,Zt=Object(oe["a"])(Wt,Vt,Jt,!1,null,null,null),er=Zt.exports,tr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"ui-br-ext-report-form",attrs:{autocomplete:"off"}},[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-modules"}},[e._v("Project")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",autocomplete:"off"},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},e.onSearch]}}),e.validation&&""!==e.searchQuery&&e.searchResults&&0==e.searchResults.length&&!e.project.id?r("span",{staticClass:"ui-br-ext-message"},[e._v("No projects found")]):e._e(),e.validation&&e.count>0&&""==e.searchQuery?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e(),r("span",{staticClass:"ui-br-ext-search-icon"},[r("svg",{staticClass:"feather feather-search",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#00ad55","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"11",cy:"11",r:"8"}}),r("line",{attrs:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}})])]),e.searchResults&&e.searchResults.length>0?r("div",{staticClass:"ui-br-ext-search-results"},[r("ul",e._l(e.searchResults.slice(0,10),(function(t){return r("li",{key:t.id},[r("span",{staticClass:"ui-br-ext-module-label",on:{click:function(r){return e.onResultClick(t)}}},[e._v(e._s(t.projectKey))])])})),0)]):e._e()])])},rr=[],nr=function(e){var t=0;return e.saveToJira&&(t=1),new Promise((function(r,n){it.a.post("".concat(e.repositoryServer,"/project"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,saveToJira:t,projectKey:e.projectKey,jiraId:e.jiraId,description:e.description}).then((function(e){r(e.data)})).catch((function(e){n(e.response.data)}))}))},or=function(e){return new Promise((function(t,r){it.a.patch("".concat(e.repositoryServer,"/project-status"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,lkProjectStatusId:e.lkProjectStatusId,id:e.id}).then((function(e){t(e.data)})).catch((function(e){console.log(e.response),r(e.response.data)}))}))},ir=function(e){var t=0;return e.saveToJira&&(t=1),new Promise((function(r,n){it.a.patch("".concat(e.repositoryServer,"/project"),{registrationKey:e.registrationKey,token:e.token,saveToJira:t,uuid:e.uuid,projectKey:e.projectKey,description:e.description,jiraId:e.jiraId,lkProjectStatusId:e.lkProjectStatusId,id:e.id}).then((function(e){r(e.data)})).catch((function(e){console.log(e.response),n(e.response.data)}))}))},sr=function(e,t){return new Promise((function(r,n){it.a.get("".concat(e.repositoryServer,"/project"),{params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,query:t,includeInactive:e.isAdmin}}).then((function(e){r(e.data.result)})).catch((function(e){console.log(e.reponse),n(e.response.data)}))}))},ar=function(e,t){return new Promise((function(r,n){it.a.delete("".concat(t.repositoryServer,"/project"),{params:{registrationKey:t.registrationKey,token:t.token,uuid:t.uuid,id:e}}).then((function(e){r(e.data)})).catch((function(e){console.log(e.reponse),n(e.response.data)}))}))},cr={postProject:nr,patchProject:ir,getProjects:sr,deleteProject:ar,statusPatchProject:or},ur={name:"ProjectSearch",props:["oldProject","validation","account"],mounted:function(){this.setFormValue(),this.get=cr.getProjects},watch:{oldProject:{handler:function(e,t){this.setFormValue()}}},data:function(){return{count:0,searchQuery:"",searchResults:[],project:{projectKey:"",id:void 0}}},methods:{setFormValue:function(){var e,t;this.oldProject&&(this.searchQuery=null!==(e=null===(t=this.oldProject)||void 0===t?void 0:t.projectKey)&&void 0!==e?e:"",this.project=this.oldProject)},resetReportData:function(){this.project={}},formValidation:function(){return!!this.project.id||(this.count++,!1)},onSearch:function(){var e=this;if(!this.account||!this.account.token)return!1;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.searchQuery=e.searchQuery.trim(),e.searchQuery.length>=2?e.getprojects():e.searchResults=[],e.project={}}),300)},getprojects:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(""!=e.searchQuery.length&&e.searchQuery.length<=10)){t.next=11;break}return t.prev=1,t.next=4,e.get(e.account,e.searchQuery);case 4:e.searchResults=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0),null!==(r=t.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=t.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},onResultClick:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.searchQuery=e.projectKey,t.searchResults=[],t.project=e,t.count=0,k.$emit("projectChanged",t.project);case 5:case"end":return r.stop()}}),r)})))()}}},lr=ur,dr=Object(oe["a"])(lr,tr,rr,!1,null,null,null),mr=dr.exports,pr={name:"ReportForm",props:["report","validation"],components:{EnvironmentSearch:Qt,ModuleSearch:er,ProjectSearch:mr},created:function(){var e;this.account=null===Gi||void 0===Gi||null===(e=Gi.store)||void 0===e?void 0:e.account,this.environment=Gi.store.reportBug.environment,this.module=Gi.store.reportBug.module,this.project=Gi.store.reportBug.project,this.checkSavedBug()},mounted:function(){this.setFormValue(this.report)},data:function(){return{form:{description:"",title:"",actualResult:"",expectedResult:"",stepsToReproduce:"",environment:{},module:{},project:{}},count:0,searchQuery:"",searchResults:[],account:{},project:{},environment:{},module:{},ezBugSavedReport:{}}},methods:{setFormValue:function(e){e&&(this.form.description=e.description||"",this.form.title=e.title||"",this.form.actualResult=e.actualResult||"",this.form.expectedResult=e.expectedResult||"",this.form.stepsToReproduce=e.stepsToReproduce||"",this.environment=e.environment||{},this.module=e.module||{},this.project=e.project||{})},resetReportData:function(){this.form={description:"",title:"",actualResult:"",expectedResult:"",stepsToReproduce:""}},formValidation:function(){var e=this;return this.count=0,this.searchResults=[],new Promise((function(t,r){Object.entries(e.form).forEach((function(t){var r=Object($t["a"])(t,2),n=r[0],o=r[1];("string"===typeof o||o instanceof String)&&(o=o.trim(),e.form[n]=o,""==o&&e.count++)})),e.$refs.environmentForm.formValidation()||e.count++,e.$refs.moduleForm.formValidation()||e.count++,e.$refs.projectForm.formValidation()||e.count++,0==e.count&&t(!0),t(!1)}))},getReportForm:function(){return this.validation?(this.form.environment=this.$refs.environmentForm.environment,this.form.module=this.$refs.moduleForm.module,this.form.project=this.$refs.projectForm.project):(this.form.environment["name"]=this.$refs.environmentForm.searchQuery,this.form.module["name"]=this.$refs.moduleForm.searchQuery,this.form.project["projectKey"]=this.$refs.projectForm.searchQuery),this.form},saveToStorage:function(){var e=this.getReportForm();this.$emit("save-bug-to-storage",e)},checkSavedBug:function(){var e=window.localStorage.getItem("ezBugSavedReport");if(null!=e&&!this.report){var t=JSON.parse(e);this.setFormValue(t.form),this.$emit("set-project-from-unsaved-report",t.form.project)}}}},vr=pr,hr=Object(oe["a"])(vr,It,At,!1,null,null,null),gr=hr.exports,fr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-file-upload-comp"},[r("div",{staticClass:"ui-br-ext-file-upload"},[e._m(0),r("input",{ref:"file",attrs:{type:"file",id:"ui-br-ext-upload",name:"ui-br-ext-upload",accept:"image/*, video/*, .pdf, .doc, .docx"},on:{change:e.addFile}}),r("ul",e._l(e.files,(function(t,n){return r("li",{key:n},[t.uuid?e._e():r("span",{staticClass:"ui-br-ext-spinner active"}),t.uuid?r("span",{on:{click:function(t){return e.removeFile(n)}}},[r("svg",{staticClass:"ui-br-ext-feather feather-x",attrs:{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#f04242","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("line",{attrs:{x1:"18",y1:"6",x2:"6",y2:"18"}}),r("line",{attrs:{x1:"6",y1:"6",x2:"18",y2:"18"}})])]):e._e(),r("span",[e._v(e._s(t.fileName))])])})),0)])])},br=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"ui-br-ext-upload"}},[e._v("Attach files "),r("span",[e._v("(image, video, doc, pdf)")])])}],xr=(r("a434"),r("c740"),r("d81d"),function(e,t){return new Promise((function(r,n){it.a.post("".concat(e.repositoryServer,"/attachment"),t,{headers:{"Content-Type":"multipart/form-data"},params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid}}).then((function(e){r(e.data)})).catch((function(e){n(e.response.data)}))}))}),wr=function(e,t,r){return new Promise((function(n,o){it.a.delete("".concat(e.repositoryServer,"/attachment"),{params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,attachment_uuid:t,bugId:r}}).then((function(e){n(e.data)})).catch((function(e){o(e.response.data)}))}))},yr=function(e,t){return new Promise((function(r,n){it.a.delete("".concat(e.repositoryServer,"/temp_attachment"),{params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,attachment_uuid:t}}).then((function(e){r(e.data)})).catch((function(e){n(e.response.data)}))}))},Cr={postFiles:xr,deleteTempFile:yr,deleteFile:wr},kr={name:"FileUpload",props:["account","report"],components:{},created:function(){this.postFiles=Cr.postFiles,this.deleteTemp=Cr.deleteTempFile,this.delete=Cr.deleteFile},mounted:function(){this.setFormValue()},data:function(){return{files:[],newUploads:[],filesToRemove:[]}},methods:{addFile:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=/(\.jpg|\.jpeg|\.bmp|\.gif|\.svg|\.png|\.webm|\.avi|\.mpeg|\.mkv|\.doc|\.docx|\.xls|\.xlsx|\.pdf)$/i,o=t.$refs.file.files[0],o){r.next=4;break}return r.abrupt("return",!1);case 4:if(i=o.name,!(o.size>5e7)){r.next=8;break}return k.$emit("toggle-toast",{text:"File size cannot exceed 50mb",danger:!0}),r.abrupt("return",!1);case 8:if(n.exec(i)){r.next=11;break}return k.$emit("toggle-toast",{text:"File extension not supported!",danger:!0}),r.abrupt("return",!1);case 11:t.files.push({fileName:i,uuid:""}),t.uploadFile(o,t.files.length-1),e.target.value="";case 14:case"end":return r.stop()}}),r)})))()},uploadFile:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var o,i,s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=new FormData,o.append("attachment",e),n.prev=2,n.next=5,r.postFiles(r.account,o);case 5:i=n.sent,i&&(r.files[t]["uuid"]=i.result,r.newUploads.push(i.result)),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](2),r.files.splice(t,1),null!==(s=n.t0.result)&&void 0!==s&&s.message?k.$emit("toggle-toast",{text:null===(a=n.t0.result)||void 0===a?void 0:a.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 13:case"end":return n.stop()}}),n,null,[[2,9]])})))()},removeFile:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=t.files[e]["uuid"],t.files[e]["path"]?(t.filesToRemove.push(n),t.files.splice(e,1)):t.deleteTempFile(e,n);case 2:case"end":return r.stop()}}),r)})))()},deleteFiles:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.filesToRemove.forEach((function(t){e.deleteFile(t)}));case 1:case"end":return t.stop()}}),t)})))()},deleteFile:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{n=t.delete(t.account,e,t.report.bugId),"success"==n.result&&(o=t.filesToRemove.findIndex((function(t){return t==e})),t.filesToRemove.splice(o))}catch(a){console.log(a),null!==(i=a.result)&&void 0!==i&&i.message?k.$emit("toggle-toast",{text:null===(s=a.result)||void 0===s?void 0:s.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0})}case 1:case"end":return r.stop()}}),r)})))()},deleteTempFile:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var o,i,s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.deleteTemp(r.account,t);case 3:o=n.sent,"success"==o.result&&(r.files.splice(e,1),i=r.newUploads.findIndex((function(e){return e==t})),r.newUploads.splice(i,1)),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),null!==(s=n.t0.result)&&void 0!==s&&s.message?k.$emit("toggle-toast",{text:null===(a=n.t0.result)||void 0===a?void 0:a.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},setFormValue:function(){this.report&&this.report.attachments&&(this.files=this.report.attachments)},getFiles:function(){return this.files.map((function(e){return e.uuid}))},getNewUploads:function(){return this.newUploads}}},jr=kr,_r=Object(oe["a"])(jr,fr,br,!1,null,null,null),Rr=_r.exports,Er=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Sr(t,r);case 2:n=e.sent,Pr(n),o=document.getElementById("ui-br-ext-download-email"),o.href=Pr(n),o.click();case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Sr=function(e){e.url=window.location.href,e.environment=e.environment.name,e.project=e.project.projectKey,e.module=e.module.name;for(var t=["project","module","environment","title","description","actualResult","expectedResult","stepsToReproduce","jira","url","xpath"],r={project:"Project",module:"Module",environment:"Environment",title:"Summary",description:"Description",actualResult:"Actual results",expectedResult:"Expected results",stepsToReproduce:"Steps to reproduce",url:"URL",xpath:"xPath",jira:"Jira"},n="",o=0,i=t;o<i.length;o++){var s=i[o];e[s]&&e[s].length>0&&(n+='<div class="title"><b>'.concat(r[s],'</b><div>\n                        <div class="description"><pre>').concat(e[s],"</pre><div> <br>"))}e.screenshot&&(n+='<img src="cid:screenshot">');var a='X-Unsent: 1\nSubject: EZBug Report\nContent-Type: multipart/related;\n boundary="multipart_related_boundary"\n\nThis is a multi-part message in MIME format\n--multipart_related_boundary\nContent-Type: text/html\nContent-Transfer-Encoding: 7bit\n\n<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">\n    <html>\n    <head>\n    <style>\n    \n    </style>\n    </head>\n    <body>\n    <div class="main">'.concat(n,"</div>\n    </body>\n    </html>\n");if(e.screenshot){var c=e.screenshot.replace("data:image/png;base64,",""),u='\n--multipart_related_boundary\nContent-Type: image/png; name="screenshot.png"\nContent-Transfer-Encoding: base64\nContent-ID: <screenshot>\nContent-Disposition: inline; filename="screenshot.png"\n\n'.concat(c);a+=u}return a},Pr=function(e){var t=new Blob([e],{type:"text/plain"}),r=window.URL.createObjectURL(t);return r},Ir={sendEmail:Er},Ar=(r("1276"),function(e,t){var r=t.saveToJira?1:0;return t.screenshot||(t.screenshot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAooAAAFnCAYAAAAhRmhNAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAFoOSURBVHhe7d0HvBTV2fjxZ+nNWEHaRbpGfd/wioWiRo0iIia+VhQR7MYS/ScaKyAXe0k0ltiigqIg4JtEuCAxYKNagu+rsdC5IFdUQKUIAvs/z8yZmTO7s+VeOvy+fPbD3dmdmTNnZneeec6ZPQIAAAAAu4xFTZuesrhZsy+/aNZsweImTbrZyQAAoBKq2f+BnUpK5C7zaGT+bJGqVm2gPxUAAFQGgSJ2SiZI3GD/lHQ6vd7+CQAAKoFAETslExxenxaZb/"),new Promise((function(n,o){it.a.post("".concat(e.repositoryServer,"/bug"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,moduleId:t.module.moduleId,actualResult:t.actualResult,description:t.description,stepsToReproduce:t.stepsToReproduce,expectedResult:t.expectedResult,xpath:t.xpath,screenshot:t.screenshot,attachments:t.attachments,title:t.title,environmentId:t.environment.environmentId,url:window.location.href,saveToJira:r,jiraSettings:e.jiraSettings,userProfileId:e.userProfileId,userEmail:e.userEmail}).then((function(e){n(e.data)})).catch((function(e){o(e.response.data)}))}))}),$r=function(e,t){return new Promise((function(r,n){it.a.post("".concat(e.repositoryServer,"/jira-issue"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,bugId:t,jiraSettings:e.jiraSettings}).then((function(e){console.log(e),r(e.data)})).catch((function(e){console.log(e),n(e.response.data)}))}))},Tr=function(e,t){return new Promise((function(r,n){it.a.patch("".concat(e.repositoryServer,"/bug"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,moduleId:t.module.moduleId,actualResult:t.actualResult,description:t.description,stepsToReproduce:t.stepsToReproduce,expectedResult:t.expectedResult,xpath:t.xpath,bugId:t.bugId,attachments:t.attachments,title:t.title,environmentId:t.environment.environmentId,url:window.location.href,userProfileId:e.userProfileId,userEmail:e.userEmail}).then((function(e){r(e.data)})).catch((function(e){n(e.response.data)}))}))},Br=function(e){var t=e.split("-");return"".concat(t[1],"/").concat(t[2],"/").concat(t[0])},Mr=function(e,t,r,n,o,i,s){return n=Br(n),o=Br(o),i=1==i?1:0,s=1==s?1:0,new Promise((function(a,c){it.a.get("".concat(e.repositoryServer,"/bug"),{params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,environmentId:t,moduleId:r,fromDate:n,toDate:o,includeCompleted:i,includeCanceled:s}}).then((function(e){a(e.data.result)})).catch((function(e){console.log(e.reponse),c(e.response.data)}))}))},Or=function(e,t,r,n){return r=1==r?1:0,n=1==n?1:0,new Promise((function(o,i){it.a.get("".concat(e.repositoryServer,"/bug-global-search"),{params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,query:t,includeCompleted:r,includeCanceled:n}}).then((function(e){o(e.data.result)})).catch((function(e){console.log(e.reponse),i(e.response.data)}))}))},Dr=function(e,t){return new Promise((function(r,n){it.a.get("".concat(e.repositoryServer,"/screenshot-blob"),{params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,bugId:t}}).then((function(e){r(e.data.result)})).catch((function(e){console.log(e.reponse),n(e.response.data)}))}))},Fr=function(e,t){return new Promise((function(r,n){it.a.get("".concat(e.repositoryServer,"/bug-details"),{params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,bugId:t}}).then((function(e){r(e.data.result)})).catch((function(e){console.log(e.reponse),n(e.response.data)}))}))},Ur={postReport:Ar,patchReport:Tr,getReports:Mr,getReportDetails:Fr,getGlobalReports:Or,getScreenshotBlob:Dr,postJira:$r},Lr={name:"ReportBugDrop",components:{UserDetails:gt,Resize:Pt,ReportForm:gr,FileUpload:Rr},created:function(){this.onGetScreenshot=te.getScreenshot,this.getFileName=lt.getFileName,this.getPdf=at.getPdf,this.getElementXpath=K.getElementXpath,this.sendEmail=Ir.sendEmail,this.postBlob=Ur.postBlob,this.postReport=Ur.postReport,this.project=Gi.store.reportBug.project},mounted:function(){var e,t=this;this.account=null===Gi||void 0===Gi||null===(e=Gi.store)||void 0===e?void 0:e.account,this.user=null===Gi||void 0===Gi?void 0:Gi.store.user,k.$on("account-loaded",(function(e){t.account=Gi.store.account})),k.$on("projectChanged",(function(e){t.project=e,t.report.saveToJira=!!t.project.jiraId})),k.$on("user-loaded",(function(){t.user=Gi.store.user})),this.saveToDb=!(!this.account||!this.account.token),this.report.xpath=this.getElementXpath(Gi.store.selectedElement),this.report.saveToJira=!!this.project.jiraId},data:function(){return{next:!1,account:{},user:{},project:{},report:{description:"",actualResult:"",expectedResult:"",stepsToReproduce:"",saveToJira:!1,savePdf:!1,sendEmail:!1,saveScreenshot:!1,screenshot:"",xpath:"",queryWidth:void 0,url:"",user:{}},saveToDb:!1,filename:"",name:"test",elementId:"ui-br-ext-report-bug",submitInPorgress:!1}},methods:{getForm:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.saveToDb){t.next=6;break}return t.next=3,e.$refs.reportForm.formValidation();case 3:if(r=t.sent,r){t.next=6;break}return t.abrupt("return",!1);case 6:Object.assign(e.report,e.$refs.reportForm.getReportForm()),e.saveReport();case 8:case"end":return t.stop()}}),t)})))()},saveReport:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Gi.store.dynamicDomFlow){t.next=5;break}return t.next=3,e.getScreenshot();case 3:t.next=7;break;case 5:e.report.screenshot=Gi.store.screenshot,e.report.queryWidth=Gi.store.queryWidth;case 7:if(e.report.saveScreenshot&&e.screenshotLink(e.report.screenshot,e.filename),!e.report.sendEmail){t.next=11;break}return t.next=11,e.sendEmail(Object(a["a"])({},e.report));case 11:e.report.url=window.location,e.report.user=e.user,e.report.attachments=e.$refs.fileUploadForm.getFiles(),e.report.savePdf&&e.submitPdf(),e.saveToDb&&e.submitReport(),Gi.store.reportBug.environment=e.report.environment,Gi.store.reportBug.module=e.report.module,Gi.store.reportBug.project=e.report.project;case 19:case"end":return t.stop()}}),t)})))()},getScreenshot:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("toggle-extension"),t.next=3,e.onGetScreenshot();case 3:e.report.screenshot=t.sent,e.$emit("toggle-extension");case 5:case"end":return t.stop()}}),t)})))()},screenshotLink:function(e,t){var r=this.$refs.downloadImageFull,n="image/png";r.download=t,r.href=e,r.dataset.downloadurl=[n,r.download,r.href].join(":"),r.click()},downloadScreenshot:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.getFileName(e.report.module),n=Gi.store.screenshot,Gi.store.dynamicDomFlow){t.next=6;break}return t.next=5,e.getScreenshot();case 5:n=e.report.screenshot;case 6:e.screenshotLink(n,r);case 7:case"end":return t.stop()}}),t)})))()},resetReportData:function(){this.report={description:"",actualResult:"",expectedResult:"",stepsToReproduce:"",saveToJira:!1,savePdf:!1,saveScreenshot:!1,screenshot:"",xpath:"",url:"",queryWidth:550,attachments:[]},Gi.store.screenshot="",Gi.store.dynamicDomFlow=!1,Gi.store.selectedElement="",Gi.store.currentElementInlineStyle="",Gi.store.selectedElementRect="",this.$refs.reportForm.resetReportData(),window.localStorage.removeItem("ezBugSavedReport"),this.cancel()},cancel:function(){this.submitInPorgress=!1,document.body.classList.remove("ui-br-ext-freeze"),k.$emit("toggle-bug-drop",{state:!1,toggleReportDetails:Gi.store.bugId})},submitReport:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitInPorgress=!0,t.prev=1,t.next=4,e.postReport(e.account,e.report);case 4:r=t.sent,Gi.store.bugId=r.result.bugId,Gi.store.xpath=e.report.xpath,r.result.message&&k.$emit("toggle-toast",{text:r.result.message,danger:!0}),e.resetReportData(),e.submitInPorgress=!1,t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](1),console.log(t.t0),null!==(n=t.t0.result)&&void 0!==n&&n.message?k.$emit("toggle-toast",{text:null===(o=t.t0.result)||void 0===o?void 0:o.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0}),e.submitInPorgress=!1;case 17:case"end":return t.stop()}}),t,null,[[1,12]])})))()},submitPdf:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitInPorgress=!0,t.prev=1,t.next=4,e.getPdf(e.report,e.account);case 4:r=t.sent,e.submitInPorgress=!1,window.open(r,"_blank"),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0),null!==(n=t.t0.result)&&void 0!==n&&n.message?k.$emit("toggle-toast",{text:null===(o=t.t0.result)||void 0===o?void 0:o.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0}),e.submitInPorgress=!1;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})))()},saveBugToStorage:function(e){var t={form:e,xpath:this.report.xpath};window.localStorage.setItem("ezBugSavedReport",JSON.stringify(t))},setProjectFromUnsavedReport:function(e){this.project=e,this.report.saveToJira=!!this.project.jiraId}}},Kr=Lr,Nr=Object(oe["a"])(Kr,rt,nt,!1,null,null,null),Qr=Nr.exports,Vr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-dropdown-item ui-br-ext-settings",attrs:{id:"ui-br-ext-settings"}},[r("div",{staticClass:"ui-br-ext-drop-title"},[e._v("Settings")]),r("div",{staticClass:"ui-br-ext-drop-body"},[e.account&&1==e.account.isAdmin?r("div",{staticClass:"ui-br-ext-settings-container"},[r("div",{staticClass:"ui-br-ext-setting-title",on:{click:function(t){e.ifModule=!e.ifModule,e.ifGlobal=!1,e.ifProject=!1,e.ifAccount=!1,e.ifUser=!1,e.ifEnvironment=!1}}},[e._v("Module")]),e.ifModule?r("Module"):e._e()],1):e._e(),e.account&&1==e.account.isAdmin?r("div",{staticClass:"ui-br-ext-settings-container"},[r("div",{staticClass:"ui-br-ext-setting-title",on:{click:function(t){e.ifProject=!e.ifProject,e.ifGlobal=!1,e.ifModule=!1,e.ifAccount=!1,e.ifUser=!1,e.ifEnvironment=!1}}},[e._v("Project")]),e.ifProject?r("Project"):e._e()],1):e._e(),e.account&&1==e.account.isAdmin?r("div",{staticClass:"ui-br-ext-settings-container"},[r("div",{staticClass:"ui-br-ext-setting-title",on:{click:function(t){e.ifEnvironment=!e.ifEnvironment,e.ifGlobal=!1,e.ifProject=!1,e.ifModule=!1,e.ifAccount=!1,e.ifUser=!1}}},[e._v("Environment")]),e.ifEnvironment?r("Environment"):e._e()],1):e._e(),r("div",{staticClass:"ui-br-ext-settings-container"},[r("div",{staticClass:"ui-br-ext-setting-title",on:{click:function(t){e.ifAccount=!e.ifAccount,e.ifGlobal=!1,e.ifProject=!1,e.ifModule=!1,e.ifUser=!1,e.ifEnvironment=!1}}},[e._v("Account")]),e.ifAccount?r("Account",{on:{"close-account":function(t){e.ifAccount=!1}}}):e._e()],1),e.account&&1==e.account.isAdmin?r("div",{staticClass:"ui-br-ext-settings-container"},[r("div",{staticClass:"ui-br-ext-setting-title",on:{click:function(t){e.ifUser=!e.ifUser,e.ifGlobal=!1,e.ifProject=!1,e.ifModule=!1,e.ifAccount=!1,e.ifEnvironment=!1}}},[e._v("User")]),e.ifUser?r("User"):e._e()],1):e._e()])])},Jr=[],zr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-settings-body"},[e.project&&e.project.projectKey?r("div",[1==e.account.isAdmin?r("div",{staticClass:"ui-br-ext-btn-link ui-br-ext-btn-create-project"},[r("span",{class:{active:e.showAddModule},attrs:{id:"ui-br-ext-btn-link"},on:{click:function(t){e.showAddModule=!e.showAddModule,e.moduleToEdit=void 0}}},[e._v("Create module")])]):e._e(),e.showAddModule?e._e():r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-modules"}},[e._v("Choose module")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",autocomplete:"off"},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},e.onSearch]}}),""!==e.searchQuery&&e.searchResults&&0==e.searchResults.length?r("span",{staticClass:"ui-br-ext-message"},[e._v("No modules found")]):e._e(),r("span",{staticClass:"ui-br-ext-search-icon"},[r("svg",{staticClass:"feather feather-search",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#00ad55","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"11",cy:"11",r:"8"}}),r("line",{attrs:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}})])]),e.searchResults&&e.searchResults.length>0?r("div",{staticClass:"ui-br-ext-search-results"},[r("ul",e._l(e.searchResults.slice(0,10),(function(t){return r("li",{key:t.moduleId},[r("span",{staticClass:"ui-br-ext-module-label",class:{"ui-br-ext-disabled":t.lkProjectStatusId}},[e._v(e._s(t.name))]),1==e.account.isAdmin?r("div",{staticClass:"ui-br-ext-module-icons"},[r("span",{on:{click:function(r){return e.onModuleEdit(Object.assign({},t))}}},[r("svg",{staticClass:"feather feather-edit-3",attrs:{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#666666","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("path",{attrs:{d:"M12 20h9"}}),r("path",{attrs:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}})])])]):e._e()])})),0)]):e._e()]),e.showAddModule?e._e():r("ProjectDetails",{attrs:{project:e.project}}),e.showAddModule?r("EditModule",{attrs:{project:e.project,module:e.moduleToEdit,account:e.account,user:e.user},on:{saveModule:e.saveModule,cancelEditing:e.cancelEditing,deleteModule:e.deleteModule}}):e._e()],1):e._e(),e.project.id?e._e():r("div",{staticClass:"ui-br-ext-warning-text"},[e._v(" Choose project first ")])])},Xr=[],qr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"ui-br-ext-info-list"},[e.project&&e.project.projectKey?r("li",[e._m(0),e.project?r("span",[e._v(" "+e._s(e.project.projectKey||"No project chosen"))]):e._e()]):e._e()])},Yr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("strong",[e._v("Project key: ")])])}],Gr={name:"ProjectDetails",props:["project"]},Hr=Gr,Wr=Object(oe["a"])(Hr,qr,Yr,!1,null,null,null),Zr=Wr.exports,en=r("ade3"),tn=function(e){return new Promise((function(t,r){chrome.storage.local.get((function(n){if(chrome.runtime.lastError)return r(chrome.runtime.lastError);t(JSON.parse(n[e]))}))}))},rn=function(e,t){return t=JSON.stringify(t),new Promise((function(r,n){try{chrome.storage.local.set(Object(en["a"])({},e,t),(function(){r(!0)}))}catch(o){n(o)}}))},nn=function(e){return new Promise((function(t,r){try{chrome.storage.local.remove(e,(function(){t(!0)}))}catch(n){r(n)}}))},on={get:tn,set:rn,remove:nn},sn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"ui-br-ext-form-title"},[e._v(e._s(e.action))]),r("form",{attrs:{autocomplete:"off",novalidate:"",name:"ui-br-ext-new-module",onsubmit:"return false"}},[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-new-module-label"}},[e._v("Module name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newModule.name,expression:"newModule.name"}],attrs:{type:"text",autocomplete:"off",name:"ui-br-ext-new-module-label",maxlength:"50",minlength:"2"},domProps:{value:e.newModule.name},on:{input:function(t){t.target.composing||e.$set(e.newModule,"name",t.target.value)}}}),r("span",{staticClass:"ui-br-ext-message"},[e._v(e._s(e.errorMessage.name))])]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-new-module-label"}},[e._v("Module description")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newModule.description,expression:"newModule.description"}],attrs:{type:"text",name:"ui-br-ext-new-module-label",maxlength:"255"},domProps:{value:e.newModule.description},on:{input:function(t){t.target.composing||e.$set(e.newModule,"description",t.target.value)}}})]),e.newModule.moduleId&&!e.newModule.allowDelete?r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newModule.inactivate,expression:"newModule.inactivate"}],attrs:{type:"checkbox",name:"jira",id:"ui-br-ext-save-to-jira"},domProps:{checked:Array.isArray(e.newModule.inactivate)?e._i(e.newModule.inactivate,null)>-1:e.newModule.inactivate},on:{change:function(t){var r=e.newModule.inactivate,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&e.$set(e.newModule,"inactivate",r.concat([i])):s>-1&&e.$set(e.newModule,"inactivate",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(e.newModule,"inactivate",o)}}}),r("label",{attrs:{for:"ui-br-ext-save-to-jira"}},[e._v("Inactivate")])]):e._e()]),r("div",{staticClass:"ui-br-ext-btn-group"},[e.newModule.moduleId&&e.newModule.allowDelete?r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.deleteModule}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Delete")])]):e._e(),r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.saveModule}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Save")])]),r("button",{staticClass:"ui-br-ext-btn-danger",attrs:{"data-listener":"off"},on:{click:function(t){return e.resetModule()}}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Cancel")])])])])},an=[],cn={name:"EditModule",props:["module","account","user","project"],mounted:function(){this.isEditing()},created:function(){this.post=Gt.postModule,this.patch=Gt.patchModule,this.delete=Gt.deleteModule},data:function(){return{newModule:{name:"",description:"",inactivate:!1},errorMessage:{name:""},action:"Create new module",moduleStatusEnum:{active:1,inactive:2}}},methods:{saveModule:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.errorMessage.name="",e.newModule.name=e.newModule.name.trim(),e.newModule.description=e.newModule.description.trim(),!e.newModule.name||""==e.newModule.name){t.next=24;break}if(t.prev=4,r=void 0,!e.newModule.moduleId){t.next=12;break}return t.next=9,e.patch(Object(a["a"])(Object(a["a"])(Object(a["a"])({},e.newModule),e.account),{},{projectId:e.project.id}));case 9:r=t.sent,t.next=15;break;case 12:return t.next=14,e.post(Object(a["a"])(Object(a["a"])(Object(a["a"])({},e.newModule),e.account),{},{projectId:e.project.id}));case 14:r=t.sent;case 15:r&&e.$emit("saveModule",r.result),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](4),console.log(t.t0),t.t0.error?e.errorMessage.name=t.t0.error:null!==(n=t.t0.result)&&void 0!==n&&n.message?k.$emit("toggle-toast",{text:null===(o=t.t0.result)||void 0===o?void 0:o.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 22:t.next=25;break;case 24:e.errorMessage.name="Enter module key";case 25:case"end":return t.stop()}}),t,null,[[4,18]])})))()},resetModule:function(){this.newModule.name="",this.newModule.description="",this.newModule.saveToJira=void 0,this.action="Create new module",delete this.newModule.moduleId,this.$emit("cancelEditing")},deleteModule:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you suuure?")){e.next=11;break}return e.prev=1,e.next=4,t.delete(t.module.moduleId,t.account,t.project.id);case 4:t.$emit("deleteModule"),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.log(e.t0),null!==(r=e.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=e.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},isEditing:function(){this.module&&this.module.moduleId&&(this.action="Edit module",this.newModule=Object(a["a"])({},this.module))}}},un=cn,ln=Object(oe["a"])(un,sn,an,!1,null,null,null),dn=ln.exports,mn={name:"Module",components:{ProjectDetails:Zr,EditModule:dn},created:function(){this.localStorage=on},mounted:function(){var e=this;this.account=Gi.store.account,this.currentModule=Gi.store.currentModule,this.user=Gi.store.user,this.project=Gi.store.project,this.get=Gt.getModules,k.$on("regkey-updated",(function(){e.onResultClick({})}))},data:function(){return{showAddModule:!1,project:{},moduleToEdit:void 0,module:{name:"",description:""},searchQuery:"",moduleMessage:"",currentModule:{},account:{},searchResults:[]}},methods:{onSearch:function(){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.searchQuery=e.searchQuery.trim(),e.searchQuery.length>=2&&e.getModules()}),300)},getModules:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""==e.searchQuery.length){t.next=13;break}return t.prev=1,t.next=4,e.get(e.account,e.searchQuery,e.project.id);case 4:e.searchResults=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0),null!==(r=t.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=t.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 11:t.next=14;break;case 13:e.searchResults=[];case 14:case"end":return t.stop()}}),t,null,[[1,7]])})))()},onResultClick:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.searchQuery="",t.searchResults=[],t.currentModule=e,Gi.store.currentModule=e,r.next=6,t.saveToLocal();case 6:case"end":return r.stop()}}),r)})))()},saveToLocal:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.stringify(e.currentModule),t.prev=1,t.next=4,e.localStorage.set("module",r);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()},onModuleEdit:function(e){this.searchQuery="",this.searchResults=[],this.showAddModule=!0,this.moduleToEdit=Object(a["a"])({},e)},saveModule:function(e){this.onResultClick(e),this.cancelEditing()},cancelEditing:function(){this.showAddModule=!1,this.moduleToEdit=void 0},deleteModule:function(){this.onResultClick(void 0),this.cancelEditing()}}},pn=mn,vn=Object(oe["a"])(pn,zr,Xr,!1,null,null,null),hn=vn.exports,gn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-settings-body"},[r("div",{staticClass:"ui-br-ext-btn-link ui-br-ext-btn-create-project"},[this.account&&this.account.token?e._e():r("span",{class:{active:e.showAddKey},attrs:{id:"ui-br-ext-btn-link"},on:{click:e.toggleView}},[e._v("Sign in")])]),this.account&&this.account.token?r("ul",{staticClass:"ui-br-ext-info-list"},[r("li",[e._m(0),r("span",[e._v(" "+e._s(e.account.userEmail))])])]):e._e(),e.showAddKey?e._e():r("ul",{staticClass:"ui-br-ext-info-list"},[r("div",{staticClass:"ui-br-ext-spacer-1"}),e.account&&e.account.email&&!e.showConfirmationMessage?r("li",[e._m(1),r("br"),r("span",[e._v(" "+e._s(e.account.email))])]):e._e(),e.showConfirmationMessage?r("li",[r("span",[e._v("Check your email for the confirmation code")])]):e._e(),r("div",{staticClass:"ui-br-ext-spacer-1"})]),e.showConfirmationMessage?r("div",[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"regKey"}},[e._v("Confirmation code")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmationCode,expression:"confirmationCode"}],attrs:{type:"text",autocomplete:"off",name:"regKey"},domProps:{value:e.confirmationCode},on:{input:function(t){t.target.composing||(e.confirmationCode=t.target.value)}}}),r("span",{staticClass:"ui-br-ext-message"},[e._v(e._s(e.confirmationCodeError))])]),r("button",{staticClass:"ui-br-ext-btn",class:{disabled:e.spinner},attrs:{id:"ui-br-ext-save-new-module","data-listener":"off",disabled:e.spinner}},[r("span",{staticClass:"ui-br-ext-spinner",class:{active:e.spinner}}),r("span",{on:{click:e.confirm}},[e._v("Confirm")])])]):e._e(),e.showAddKey?r("div",[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"regKey"}},[e._v("License Key")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.regKey,expression:"regKey"}],attrs:{type:"text",autocomplete:"off",name:"regKey"},domProps:{value:e.regKey},on:{input:function(t){t.target.composing||(e.regKey=t.target.value)}}}),r("span",{staticClass:"ui-br-ext-message"},[e._v(e._s(e.keyError))])]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"email"}},[e._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",name:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("span",{staticClass:"ui-br-ext-message"},[e._v(e._s(e.emailError))])]),r("button",{staticClass:"ui-br-ext-btn",class:{disabled:e.spinner},attrs:{id:"ui-br-ext-save-new-module","data-listener":"off",disabled:e.spinner}},[r("span",{staticClass:"ui-br-ext-spinner",class:{active:e.spinner}}),r("span",{on:{click:e.onRegKeySave}},[e._v("Save")])])]):e._e()])},fn=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("strong",[e._v("Logged user:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("strong",[e._v("Email:")])])}],bn=r("15fd"),xn=(r("00b4"),r("ec26")),wn="https://extension-auth.evendor.app/api",yn=function(e){return e={RegistrationKey:e.registrationKey,UserEmail:e.userEmail,UserAppId:e.userAppId},new Promise((function(t,r){fetch("".concat(wn,"/get_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();401===e.status?r("Unauthorized"):r("Sorry, something went wrong")})).then((function(e){t(e)})).catch((function(e){r("Sorry, something went wrong")}))}))},Cn=function(e,t){var r={RegistrationKey:t.registrationKey,UserEmail:t.userEmail,UserAppId:t.userAppId,ConfirmationCode:e};return new Promise((function(e,t){fetch("".concat(wn,"/confirm_user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){if(e.ok)return e.json();401===e.status?t("Unauthorized"):500===e.status&&t("Sorry, something went wrong")})).then((function(t){e(t)})).catch((function(e){console.log(e),t(e.result.data)}))}))},kn={auth:yn,verifyCode:Cn},jn=["date"],_n={name:"Account",created:function(){this.auth=kn.auth,this.verify=kn.verifyCode,this.localStorage=on},mounted:function(){this.account=Gi.store.account,this.checkTempData()},data:function(){return{account:{},isRegKeySaved:!1,showAddKey:!1,regKey:"",keyError:"",email:"",emailError:"",spinner:!1,showConfirmationMessage:!1,confirmationCode:"",confirmationCodeError:"",appId:"",validateConfirmationCode:"",tempData:void 0,userData:{}}},methods:{onRegKeySave:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.keyError="",e.emailError="",r=0,""==e.regKey.trim()&&(e.keyError="License key is required",r++),""==e.email.trim()?(e.emailError="Email is required",r++):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(e.emailError="Please enter a valid email address",r++),!(r>0)){t.next=7;break}return t.abrupt("return",!1);case 7:e.submit();case 8:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.appId=Object(xn["a"])(),e.spinner=!0,e.userData={registrationKey:e.regKey,userEmail:e.email,userAppId:e.appId,date:Date.now()},t.prev=3,t.next=6,e.auth(e.userData);case 6:return e.showConfirmationMessage=!0,t.prev=7,t.next=10,e.localStorage.set("tempUserData",e.userData);case 10:return t.next=12,e.localStorage.remove("userData");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](7),console.log(t.t0);case 17:e.spinner=!1,e.showAddKey=!1,t.next=26;break;case 21:t.prev=21,t.t1=t["catch"](3),console.log(t.t1),k.$emit("toggle-toast",{text:t.t1,danger:!0}),e.spinner=!1;case 26:case"end":return t.stop()}}),t,null,[[3,21],[7,14]])})))()},confirm:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.spinner=!0,t.prev=1,t.next=4,e.verify(e.confirmationCode,e.userData);case 4:e.account=t.sent,Gi.store.account=e.account,e.showConfirmationMessage=!1,e.$emit("close-account"),e.tempData=void 0,e.updateStorage(),k.$emit("account-loaded"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](1),console.log(t.t0),null!==t.t0&&void 0!==t.t0&&t.t0.result.message?k.$emit("toggle-toast",{text:null===(r=t.t0.result)||void 0===r?void 0:r.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 17:return t.prev=17,e.spinner=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,13,17,20]])})))()},validateCode:function(){this.confirmationCodeError="";var e=this.confirmationCode.trim();return e=e.replace(/\D/g,""),e&&6==e.length?(this.validateConfirmationCode=e,!0):(this.confirmationCodeError="Confirmation code is inocrrect",!1)},updateStorage:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.userData,r.date,n=Object(bn["a"])(r,jn),t.prev=1,t.next=4,e.localStorage.set("userData",n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log(t.t0);case 9:return t.prev=9,t.next=12,e.localStorage.remove("tempUserData");case 12:t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](9),console.log(t.t1);case 17:case"end":return t.stop()}}),t,null,[[1,6],[9,14]])})))()},checkTempData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.account||!e.account.email){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,e.localStorage.get("tempUserData");case 5:if(r=t.sent,n=(Date.now()-r.date)/6e4,!(n<60)){t.next=12;break}return e.showConfirmationMessage=!0,e.userData=r,t.next=12,e.localStorage.remove("tempUserData");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](2),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})))()},toggleView:function(){this.showAddKey=!this.showAddKey,this.showConfirmationMessage=!1}}},Rn=_n,En=Object(oe["a"])(Rn,gn,fn,!1,null,null,null),Sn=En.exports,Pn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-settings-body"},[1==e.account.isAdmin?r("div",{staticClass:"ui-br-ext-btn-link ui-br-ext-btn-create-project"},[r("span",{class:{active:e.showAddProject},attrs:{id:"ui-br-ext-btn-link"},on:{click:function(t){e.showAddProject=!e.showAddProject,e.projectToEdit=void 0}}},[e._v("Create project")])]):e._e(),e.showAddProject?e._e():r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-modules"}},[e._v("Choose project")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",autocomplete:"off"},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},e.onSearch]}}),""!==e.searchQuery&&e.searchQuery.length>2&&e.searchResults&&0==e.searchResults.length?r("span",{staticClass:"ui-br-ext-message"},[e._v("No project found")]):e._e(),r("span",{staticClass:"ui-br-ext-search-icon"},[r("svg",{staticClass:"feather feather-search",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#00ad55","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"11",cy:"11",r:"8"}}),r("line",{attrs:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}})])]),e.searchResults&&e.searchResults.length>0?r("div",{staticClass:"ui-br-ext-search-results"},[r("ul",e._l(e.searchResults.slice(0,10),(function(t){return r("li",{key:t.jiraId},[r("span",{staticClass:"ui-br-ext-module-label",class:{"ui-br-ext-disabled":2==t.lkProjectStatusId},on:{click:function(r){return e.onResultClick(t)}}},[e._v(e._s(t.projectKey))]),1==e.account.isAdmin?r("div",{staticClass:"ui-br-ext-module-icons"},[r("span",{on:{click:function(r){return e.onProjectEdit(t)}}},[r("svg",{staticClass:"feather feather-edit-3",attrs:{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#666666","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("path",{attrs:{d:"M12 20h9"}}),r("path",{attrs:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}})])])]):e._e()])})),0)]):e._e()]),e.showAddProject?e._e():r("ProjectDetails",{attrs:{project:e.project}}),e.showAddProject?r("EditProject",{attrs:{project:e.projectToEdit,account:e.account,user:e.user},on:{saveProject:e.saveProject,cancelEditing:e.cancelEditing,deleteProject:e.deleteProject}}):e._e()],1)},In=[],An=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"ui-br-ext-form-title"},[e._v(e._s(e.action))]),r("form",{attrs:{autocomplete:"off",novalidate:"",name:"ui-br-ext-new-project",onsubmit:"return false"}},[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-new-project-label"}},[e._v("Project key")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newProject.projectKey,expression:"newProject.projectKey"}],attrs:{type:"text",autocomplete:"off",name:"ui-br-ext-new-project-label",maxlength:"10",minlength:"2",disabled:e.newProject.id&&2==e.newProject.lkProjectStatusId},domProps:{value:e.newProject.projectKey},on:{input:function(t){t.target.composing||e.$set(e.newProject,"projectKey",t.target.value)}}}),r("span",{staticClass:"ui-br-ext-message"},[e._v(e._s(e.errorMessage.projectKey))])]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-new-project-label"}},[e._v("Project description")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newProject.description,expression:"newProject.description"}],attrs:{type:"text",name:"ui-br-ext-new-project-label",maxlength:"255"},domProps:{value:e.newProject.description},on:{input:function(t){t.target.composing||e.$set(e.newProject,"description",t.target.value)}}})]),e.newProject.saveToJira?r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-new-project-label"}},[e._v("Jira id")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newProject.jiraId,expression:"newProject.jiraId"}],attrs:{type:"text",autocomplete:"off",name:"ui-br-ext-new-project-label",maxlength:"10",minlength:"2"},domProps:{value:e.newProject.jiraId},on:{input:function(t){t.target.composing||e.$set(e.newProject,"jiraId",t.target.value)}}}),r("span",{staticClass:"ui-br-ext-message"},[e._v(e._s(e.errorMessage.jiraId))])]):e._e(),e.account&&e.account.jiraSettings?r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newProject.saveToJira,expression:"newProject.saveToJira"}],attrs:{type:"checkbox",name:"jira",id:"ui-br-ext-save-to-jira"},domProps:{checked:Array.isArray(e.newProject.saveToJira)?e._i(e.newProject.saveToJira,null)>-1:e.newProject.saveToJira},on:{change:function(t){var r=e.newProject.saveToJira,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&e.$set(e.newProject,"saveToJira",r.concat([i])):s>-1&&e.$set(e.newProject,"saveToJira",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(e.newProject,"saveToJira",o)}}}),r("label",{attrs:{for:"ui-br-ext-save-to-jira"}},[e._v("Jira project")])]):e._e()]),r("div",{staticClass:"ui-br-ext-btn-group"},[e.newProject.id&&2==e.newProject.lkProjectStatusId?r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:function(t){return e.projectStatus(1)}}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Activate")])]):e._e(),e.newProject.id&&!e.newProject.allowDelete&&1==e.newProject.lkProjectStatusId?r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:function(t){return e.projectStatus(2)}}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Inactivate")])]):e._e(),e.newProject.id&&e.newProject.allowDelete?r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.deleteProject}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Delete")])]):e._e(),r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.saveProject}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Save")])]),r("button",{staticClass:"ui-br-ext-btn-danger",attrs:{"data-listener":"off"},on:{click:function(t){return e.resetProject()}}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Cancel")])])])])},$n=[],Tn={name:"EditProject",props:["project","account","user"],mounted:function(){this.isEditing()},created:function(){this.post=cr.postProject,this.patch=cr.patchProject,this.statusPatch=cr.statusPatchProject,this.delete=cr.deleteProject},data:function(){return{newProject:{projectKey:"",description:"",jiraId:"",saveToJira:!1,inactivate:!1},errorMessage:{projectKey:"",jiraId:""},action:"Create new project",projectStatusEnum:{active:1,inactive:2}}},methods:{saveProject:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.errorMessage.projectKey="",e.errorMessage.jiraId="",e.newProject.projectKey=e.newProject.projectKey.trim(),e.newProject.description=e.newProject.description.trim(),""==e.newProject.projectKey){t.next=30;break}if(e.newProject.saveToJira&&e.newProject.jiraId&&(e.newProject.jiraId=e.newProject.jiraId.toString().trim()),!e.newProject.saveToJira||""!=e.newProject.jiraId){t.next=9;break}return e.errorMessage.jiraId="Enter jira id ",t.abrupt("return",!1);case 9:if(t.prev=9,r=void 0,!e.newProject.id){t.next=18;break}return e.newProject.inactivate&&(e.newProject.lkProjectStatusId=2),t.next=15,e.patch(Object(a["a"])(Object(a["a"])({},e.newProject),e.account));case 15:r=t.sent,t.next=21;break;case 18:return t.next=20,e.post(Object(a["a"])(Object(a["a"])({},e.newProject),e.account));case 20:r=t.sent;case 21:r.result&&(2==r.result.lkProjectStatusId&&(r={}),e.$emit("saveProject",r.result)),t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](9),console.log(t.t0),t.t0.error?e.errorMessage.name=t.t0.error:null!==(n=t.t0.result)&&void 0!==n&&n.message?k.$emit("toggle-toast",{text:null===(o=t.t0.result)||void 0===o?void 0:o.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 28:t.next=31;break;case 30:e.errorMessage.projectKey="Enter project key";case 31:case"end":return t.stop()}}),t,null,[[9,24]])})))()},resetProject:function(){this.newProject.projectKey="",this.newProject.description="",this.newProject.jiraId="",this.newProject.saveToJira=void 0,this.action="Create new project",delete this.newProject.id,this.$emit("cancelEditing")},deleteProject:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you suuure?")){e.next=11;break}return e.prev=1,e.next=4,t.delete(t.project.id,t.account);case 4:t.$emit("deleteProject"),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.log(e.t0),null!==(r=e.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=e.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},projectStatus:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.newProject.lkProjectStatusId=e,r.next=4,t.statusPatch(Object(a["a"])(Object(a["a"])({},t.newProject),t.account));case 4:n=r.sent,n.result&&t.$emit("saveProject",n.result),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log(r.t0),null!==(o=r.t0.result)&&void 0!==o&&o.message?k.$emit("toggle-toast",{text:null===(i=r.t0.result)||void 0===i?void 0:i.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},isEditing:function(){this.project&&this.project.id&&(this.action="Edit project",this.newProject=Object(a["a"])({},this.project),this.newProject.inactivate=this.newProject.lkProjectStatusId!=this.projectStatusEnum.active)}}},Bn=Tn,Mn=Object(oe["a"])(Bn,An,$n,!1,null,null,null),On=Mn.exports,Dn={name:"Project",components:{ProjectDetails:Zr,EditProject:On},created:function(){this.localStorage=on},mounted:function(){var e=this;this.account=Gi.store.account,this.project=Gi.store.project,this.user=Gi.store.user,this.get=cr.getProjects,k.$on("regkey-updated",(function(){e.onResultClick({})}))},data:function(){return{showAddProject:!1,project:{},searchQuery:"",timeout:null,searchResults:[],projectToEdit:void 0,account:{}}},methods:{onResultClick:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.searchQuery="",t.searchResults=[],t.project=e,Gi.store.project=e,Gi.store.reportBug.project=e,Gi.store.reportBug.module={},k.$emit("account-loaded"),r.next=9,t.saveToLocal();case 9:case"end":return r.stop()}}),r)})))()},onSearch:function(){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.searchQuery=e.searchQuery.trim(),e.searchQuery.length>=2&&e.getProjects()}),300)},getProjects:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""==e.searchQuery.length){t.next=13;break}return t.prev=1,t.next=4,e.get(e.account,e.searchQuery);case 4:e.searchResults=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0),null!==(r=t.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=t.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 11:t.next=14;break;case 13:e.searchResults=[];case 14:case"end":return t.stop()}}),t,null,[[1,7]])})))()},saveToLocal:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.stringify(e.project),t.prev=1,t.next=4,e.localStorage.set("project",r);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()},onProjectEdit:function(e){this.searchQuery="",this.searchResults=[],this.showAddProject=!0,this.projectToEdit=Object(a["a"])({},e)},saveProject:function(e){this.onResultClick(e),this.cancelEditing()},cancelEditing:function(){this.showAddProject=!1,this.projectToEdit=void 0},deleteProject:function(){this.onResultClick(void 0),this.cancelEditing()}}},Fn=Dn,Un=Object(oe["a"])(Fn,Pn,In,!1,null,null,null),Ln=Un.exports,Kn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-settings-body"},[r("div",[1==e.account.isAdmin?r("div",{staticClass:"ui-br-ext-btn-link ui-br-ext-btn-create-project"},[r("span",{class:{active:e.showAddEnvironment},attrs:{id:"ui-br-ext-btn-link"},on:{click:function(t){e.showAddEnvironment=!e.showAddEnvironment,e.environmentToEdit=void 0}}},[e._v("Create environment")])]):e._e(),e.showAddEnvironment?e._e():r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-modules"}},[e._v("Choose environment")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",autocomplete:"off"},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},e.onSearch]}}),""!==e.searchQuery&&e.searchResults&&0==e.searchResults.length?r("span",{staticClass:"ui-br-ext-message"},[e._v("No environment found")]):e._e(),r("span",{staticClass:"ui-br-ext-search-icon"},[r("svg",{staticClass:"feather feather-search",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#00ad55","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"11",cy:"11",r:"8"}}),r("line",{attrs:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}})])]),e.searchResults&&e.searchResults.length>0?r("div",{staticClass:"ui-br-ext-search-results"},[r("ul",e._l(e.searchResults.slice(0,10),(function(t){return r("li",{key:t.environmentId},[r("span",{staticClass:"ui-br-ext-module-label"},[e._v(e._s(t.name))]),1==e.account.isAdmin?r("div",{staticClass:"ui-br-ext-module-icons"},[r("span",{on:{click:function(r){return e.onEnvironmentEdit(Object.assign({},t))}}},[r("svg",{staticClass:"feather feather-edit-3",attrs:{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#666666","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("path",{attrs:{d:"M12 20h9"}}),r("path",{attrs:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}})])])]):e._e()])})),0)]):e._e()]),e.showAddEnvironment?r("EditEnvironment",{attrs:{environment:e.environmentToEdit,account:e.account},on:{saveEnvironment:e.saveEnvironment,cancelEditing:e.cancelEditing,deleteEnvironment:e.deleteEnvironment}}):e._e()],1)])},Nn=[],Qn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"ui-br-ext-form-title"},[e._v(e._s(e.action))]),r("form",{attrs:{autocomplete:"off",novalidate:"",name:"ui-br-ext-new-module",onsubmit:"return false"}},[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-new-module-label"}},[e._v("Environment name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newEnvironment.name,expression:"newEnvironment.name"}],attrs:{type:"text",autocomplete:"off",name:"ui-br-ext-new-module-label",maxlength:"50",minlength:"2"},domProps:{value:e.newEnvironment.name},on:{input:function(t){t.target.composing||e.$set(e.newEnvironment,"name",t.target.value)}}}),r("span",{staticClass:"ui-br-ext-message"},[e._v(e._s(e.errorMessage.name))])])]),r("div",{staticClass:"ui-br-ext-btn-group"},[e.newEnvironment.environmentId&&e.newEnvironment.allowDelete?r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.deleteEnvironment}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Delete")])]):e._e(),r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.saveEnvironment}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Save")])]),r("button",{staticClass:"ui-br-ext-btn-danger",attrs:{"data-listener":"off"},on:{click:function(t){return e.resetEnvironment()}}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Cancel")])])])])},Vn=[],Jn={name:"EditEnvironment",props:["environment","account"],mounted:function(){this.isEditing()},created:function(){this.post=Ut.postEnvironment,this.patch=Ut.patchEnvironment,this.delete=Ut.deleteEnvironment},data:function(){return{newEnvironment:{name:""},errorMessage:{name:""},action:"Add environment"}},methods:{saveEnvironment:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.errorMessage.name="",e.newEnvironment.name=e.newEnvironment.name.trim(),!e.newEnvironment.name||""==e.newEnvironment.name){t.next=23;break}if(t.prev=3,r=void 0,!e.newEnvironment.environmentId){t.next=11;break}return t.next=8,e.patch(Object(a["a"])(Object(a["a"])({},e.newEnvironment),e.account));case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,e.post(Object(a["a"])(Object(a["a"])({},e.newEnvironment),e.account));case 13:r=t.sent;case 14:r&&e.$emit("saveEnvironment",r.result),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](3),console.log(t.t0),t.t0.error?e.errorMessage.name=t.t0.error:null!==(n=t.t0.result)&&void 0!==n&&n.message?k.$emit("toggle-toast",{text:null===(o=t.t0.result)||void 0===o?void 0:o.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 21:t.next=24;break;case 23:e.errorMessage.name="Enter environment key";case 24:case"end":return t.stop()}}),t,null,[[3,17]])})))()},resetEnvironment:function(){this.newEnvironment.name="",this.action="Create new environment",delete this.newEnvironment,this.$emit("cancelEditing")},deleteEnvironment:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you suuure?")){e.next=11;break}return e.prev=1,e.next=4,t.delete(t.environment.environmentId,t.account);case 4:t.$emit("deleteEnvironment"),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),null!==(r=e.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=e.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0}),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},isEditing:function(){this.environment&&this.environment.environmentId&&(this.action="Edit environment",this.newEnvironment=Object(a["a"])({},this.environment))}}},zn=Jn,Xn=Object(oe["a"])(zn,Qn,Vn,!1,null,null,null),qn=Xn.exports,Yn={name:"Environment",components:{EditEnvironment:qn},created:function(){this.localStorage=on},mounted:function(){this.account=Gi.store.account,this.get=Ut.getEnvironments},data:function(){return{showAddEnvironment:!1,environmentToEdit:void 0,environment:{name:"",description:""},searchQuery:"",environmentMessage:"",account:{},searchResults:[]}},methods:{onSearch:function(){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.searchQuery=e.searchQuery.trim(),e.searchQuery.length>2&&e.getEnvironments()}),300)},getEnvironments:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""==e.searchQuery.length){t.next=13;break}return t.prev=1,t.next=4,e.get(e.account,e.searchQuery);case 4:e.searchResults=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0),null!==(r=t.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=t.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 11:t.next=14;break;case 13:e.searchResults=[];case 14:case"end":return t.stop()}}),t,null,[[1,7]])})))()},onResultClick:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.searchQuery="",t.searchResults=[],t.currentEnvironment=e;case 3:case"end":return r.stop()}}),r)})))()},onEnvironmentEdit:function(e){this.searchQuery="",this.searchResults=[],this.showAddEnvironment=!0,this.environmentToEdit=Object(a["a"])({},e)},saveEnvironment:function(e){this.onResultClick(e),this.cancelEditing()},cancelEditing:function(){this.showAddEnvironment=!1,this.environmentToEdit=void 0},deleteEnvironment:function(){this.onResultClick(void 0),this.cancelEditing()}}},Gn=Yn,Hn=Object(oe["a"])(Gn,Kn,Nn,!1,null,null,null),Wn=Hn.exports,Zn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-settings-body"},[r("div",{staticClass:"ui-br-ext-btn-link ui-br-ext-btn-create-project"},[r("span",{class:{active:e.showAddUser},attrs:{id:"ui-br-ext-btn-link"},on:{click:function(t){e.showAddUser=!e.showAddUser}}},[e._v("Add user")])]),e.showAddUser?e._e():r("div",[r("UserSearch",{attrs:{account:e.account},on:{editUser:e.editUser}})],1),e.showAddUser?r("div",[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"email"}},[e._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",autocomplete:"off",name:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("span",{staticClass:"ui-br-ext-message"},[e._v(e._s(e.emailError))])]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.IsAdmin,expression:"IsAdmin"}],attrs:{type:"checkbox",name:"IsAdmin",id:"ui-br-ext-save-to-jira"},domProps:{checked:Array.isArray(e.IsAdmin)?e._i(e.IsAdmin,null)>-1:e.IsAdmin},on:{change:function(t){var r=e.IsAdmin,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&(e.IsAdmin=r.concat([i])):s>-1&&(e.IsAdmin=r.slice(0,s).concat(r.slice(s+1)))}else e.IsAdmin=o}}}),r("label",{attrs:{for:"ui-br-ext-save-to-jira"}},[e._v("Admin")])]),e.user&&e.user.UserProfileId?r("div",{staticClass:"ui-br-ext-btn-group"},[r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.deleteUser}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Delete")])]),r("button",{staticClass:"ui-br-ext-btn",attrs:{id:"ui-br-ext-save-new-module","data-listener":"off"}},[r("span",{staticClass:"ui-br-ext-spinner",class:{active:e.spinner}}),r("span",{on:{click:e.onUserSave}},[e._v("Update")])]),r("button",{staticClass:"ui-br-ext-btn-danger",attrs:{"data-listener":"off"},on:{click:function(t){return e.resetUser()}}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Cancel")])])]):e._e(),e.user&&!e.user.UserProfileId?r("div",{staticClass:"ui-br-ext-btn-group"},[r("button",{staticClass:"ui-br-ext-btn",attrs:{id:"ui-br-ext-save-new-module","data-listener":"off"}},[r("span",{staticClass:"ui-br-ext-spinner",class:{active:e.spinner}}),r("span",{on:{click:e.onUserSave}},[e._v("Save")])]),r("button",{staticClass:"ui-br-ext-btn-danger",attrs:{"data-listener":"off"},on:{click:function(t){return e.resetUser()}}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Cancel")])])]):e._e()]):e._e()])},eo=[],to="https://extension-auth.evendor.app/api",ro=function(e){return new Promise((function(t,r){it.a.post("".concat(to,"/user_profile"),e).then((function(e){t(e.account)})).catch((function(e){r(e.response.data)}))}))},no=function(e){return new Promise((function(t,r){it.a.patch("".concat(to,"/user-profile"),e).then((function(e){t(e.account)})).catch((function(e){r(e.response.data)}))}))},oo=function(e,t){return new Promise((function(r,n){it.a.get("".concat(to,"/user-profile"),{params:{RegistrationKey:e.registrationKey,UserEmail:e.userEmail,UserAppId:e.userAppId,query:t}}).then((function(e){r(e.data.result)})).catch((function(e){n(e.response)}))}))},io=function(e,t){return new Promise((function(r,n){it.a.delete("".concat(to,"/user-profile"),{params:{RegistrationKey:e.registrationKey,UserEmail:e.userEmail,UserAppId:e.userAppId,UserProfileId:t}}).then((function(e){r(e.account)})).catch((function(e){n(e.response.data)}))}))},so=function(e,t){var r=e.registrationKey.slice(0,-2);return new Promise((function(n,o){it.a.get("".concat(to,"/user-email"),{params:{RegistrationKey:r,UserEmail:e.userEmail,UserAppId:e.userAppId,UserProfileId:t}}).then((function(e){n(e.data.result.UserEmail)})).catch((function(e){o(e.response.data)}))}))},ao={postUser:ro,patchUser:no,getUser:oo,deleteUser:io,getUserId:so},co=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-modules"}},[e._v("User email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.emailSearch,expression:"emailSearch"}],attrs:{type:"email"},domProps:{value:e.emailSearch},on:{input:function(t){t.target.composing||(e.emailSearch=t.target.value)}}}),r("span",{staticClass:"ui-br-ext-message "},[e._v(e._s(e.emailError))]),r("span",{staticClass:"ui-br-ext-search-icon"},[r("svg",{staticClass:"feather feather-search",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#00ad55","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"11",cy:"11",r:"8"}}),r("line",{attrs:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}})])])]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[e.users&&e.users.length>0?r("div",{staticClass:"ui-br-ext-search-results"},[r("ul",e._l(e.users,(function(t,n){return r("li",{key:n,staticClass:"ui-br-ext-hovered"},[r("span",{staticClass:"ui-br-ext-module-label ui-br-ext-no-hover"},[e._v(e._s(t.UserEmail))]),r("div",{staticClass:"ui-br-ext-module-icons"},[r("span",{on:{click:function(r){return e.onUserEdit(t)}}},[r("svg",{staticClass:"feather feather-edit-3",attrs:{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#666666","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("path",{attrs:{d:"M12 20h9"}}),r("path",{attrs:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}})])])])])})),0)]):e._e(),e.noUsersFound?r("div",{staticClass:"ui-br-ext-search-results"},[e._m(0)]):e._e()]),r("button",{staticClass:"ui-br-ext-btn",attrs:{id:"ui-br-ext-save-new-module","data-listener":"off"}},[r("span",{staticClass:"ui-br-ext-spinner",class:{active:e.spinner}}),r("span",{on:{click:e.onUserSearch}},[e._v("Search")])])])},uo=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",{staticClass:"ui-br-ext-hovered"},[r("span",{staticClass:"ui-br-ext-module-label ui-br-ext-no-hover"},[e._v("No users found")])])])}],lo={name:"UserSearch",components:{},created:function(){this.get=ao.getUser},mounted:function(){},props:["account"],data:function(){return{spinner:!1,user:{},showAddUser:!1,emailError:"",emailSearch:"",email:{},users:[],noUsersFound:!1}},methods:{emailValidation:function(){return this.emailError="",""==this.emailSearch.trim()?(this.emailError="Email is required",!1):!(this.emailSearch.length<3)||(this.emailError="Min 2 chars",!1)},onUserSearch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.noUsersFound=!1,e.emailValidation()){t.next=3;break}return t.abrupt("return",!1);case 3:return t.prev=3,t.next=6,e.get(e.account,e.emailSearch);case 6:e.users=t.sent,0==e.users&&(e.noUsersFound=!0),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log(t.t0),null!==(r=t.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=t.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))()},onUserEdit:function(e){e.email=e.UserEmail,this.$emit("editUser",e)},resetUser:function(){this.user={},this.emailSearch="",this.showAddUser=!1,this.emailError="",this.emailSearch=""}}},mo=lo,po=Object(oe["a"])(mo,co,uo,!1,null,null,null),vo=po.exports,ho={name:"User",components:{UserSearch:vo},created:function(){this.post=ao.postUser,this.patch=ao.patchUser,this.delete=ao.deleteUser,this.localStorage=on},mounted:function(){this.getAdminData()},data:function(){return{email:"",spinner:!1,showAddUser:!1,emailError:"",user:{},IsAdmin:!1,account:{}}},methods:{emailValidation:function(){return this.emailError="",""==this.email.trim()?(this.emailError="Email is required",!1):!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)||(this.emailError="Please enter a valid email address",!1)},editUser:function(e){this.user=e,this.showAddUser=!0,this.email=e.email,this.IsAdmin=e.IsAdmin,this.UserProfileId=e.UserProfileId},onUserSave:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.emailValidation()){t.next=2;break}return t.abrupt("return",!1);case 2:if(e.showAddUser=!0,t.prev=3,e.IsAdmin=e.IsAdmin?1:0,r={RegistrationKey:e.account.registrationKey,UserEmail:e.account.userEmail,UserAppId:e.account.userAppId,IsAdmin:e.IsAdmin,UserProfileEmail:e.email,NewUserEmail:e.email},!e.user||!e.user.UserProfileId){t.next=12;break}return r.UserProfileId=e.UserProfileId,t.next=10,e.patch(r);case 10:t.next=14;break;case 12:return t.next=14,e.post(r);case 14:e.resetUser(),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](3),t.t0.error?e.emailError=t.t0.error:null!==(n=t.t0.result)&&void 0!==n&&n.message?k.$emit("toggle-toast",{text:null===(o=t.t0.result)||void 0===o?void 0:o.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0}),e.showAddUser=!1;case 21:case"end":return t.stop()}}),t,null,[[3,17]])})))()},deleteUser:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.delete(e.account,e.UserProfileId);case 3:e.resetUser(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),null!==(r=t.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=t.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},resetUser:function(){this.user={},this.email="",this.showAddUser=!1,this.emailError="",this.IsAdmin=""},getAdminData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.localStorage.get("userData");case 3:e.account=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},go=ho,fo=Object(oe["a"])(go,Zn,eo,!1,null,null,null),bo=fo.exports,xo={name:"SettingsDrop",components:{Module:hn,Account:Sn,User:bo,Project:Ln,Environment:Wn},mounted:function(){var e,t=this;this.account=null===Gi||void 0===Gi||null===(e=Gi.store)||void 0===e?void 0:e.account,this.currentModule=null===Gi||void 0===Gi?void 0:Gi.store.currentModule,k.$on("account-loaded",(function(e){t.account=Gi.store.account,t.currentModule=Gi.store.currentModule})),k.$on("regkey-updated",(function(e){t.account=Gi.store.account,t.currentModule=Gi.store.currentModule}))},data:function(){return{ifModule:!1,ifAccount:!1,ifUser:!1,ifProject:!1,ifEnvironment:!1,ifGlobal:!1,currentModule:{},account:{}}},methods:{}},wo=xo,yo=Object(oe["a"])(wo,Vr,Jr,!1,null,null,null),Co=yo.exports,ko=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"divToResize",staticClass:"ui-br-ext-dropdown-item ui-br-ext-review",attrs:{id:"ui-br-ext-review"}},[r("div",{staticClass:"ui-br-ext-drop-title"},[e._v("Reports")]),e.account&&e.account.token?r("div",{staticClass:"ui-br-ext-drop-body"},[e.toggle.allReports?r("AllReports",{ref:"allReportsRef",attrs:{sharedReports:e.reports},on:{"show-details":e.showDetails,setReports:e.setReports}}):e._e(),e.toggle.details?r("ReportDetails",{attrs:{sharedReports:e.reports,bugId:e.bugId,account:e.account},on:{reselect:e.showReselect,"status-update":e.showStatusUpdate,"edit-report":e.showEditReport,"close-details":e.closeDetails}}):e._e(),e.toggle.status?r("StatusChoice",{attrs:{report:e.report,account:e.account},on:{"close-status":e.closeStatus}}):e._e(),e.toggle.reselect?r("Reselect",{attrs:{report:e.report,account:e.account},on:{"close-reselect":e.closeReselect,reselected:e.updateReportOnReselect,"toggle-extension":function(t){return e.$emit("toggle-extension")}}}):e._e(),e.toggle.edit?r("EditReport",{attrs:{report:e.report,account:e.account},on:{"cancel-edit-report":e.cancelEditReport}}):e._e()],1):e._e(),e.account&&e.account.token?e._e():r("div",{staticClass:"ui-br-ext-drop-body"},[r("p",[e._v("Report for users with Account")]),r("p",[e._v("Features:")])]),r("Resize",{attrs:{elementId:e.elementId}})],1)},jo=[],_o=(r("b64b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("div",{staticClass:"ui-br-ext-tabs-container"},[r("div",{staticClass:"ui-br-ext-tabs"},[r("div",{staticClass:"ui-br-ext-tab",class:{active:e.ifFilter},on:{click:function(t){e.ifFilter=!e.ifFilter,e.ifGlobal=!1,e.setReports([]),e.reportNotFound=!1}}},[e._v("Search filters")]),r("div",{staticClass:"ui-br-ext-tab",class:{active:e.ifGlobal},on:{click:function(t){e.ifGlobal=!e.ifGlobal,e.ifFilter=!1,e.setReports([]),e.reportNotFound=!1}}},[e._v("Global search")])]),e.ifFilter?r("div",{staticClass:"ui-br-ext-tab-item"},[r("ProjectSearch",{ref:"projectForm",attrs:{account:e.account,validation:!0,oldProject:e.project}}),r("ModuleSearch",{ref:"moduleForm",attrs:{account:e.account,validation:!0,project:e.project,oldModule:e.module}}),r("EnvironmentSearch",{ref:"environmentForm",attrs:{account:e.account,validation:!0,oldEnvironment:e.environment}}),r("div",{staticClass:"ui-br-ext-dates"},[r("div",{staticClass:"ui-br-ext-fromto ui-br-ext-form-container ui-br-ext-text"},[r("label",{attrs:{for:"ui-br-ext-from"}},[e._v("From")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.from,expression:"from"}],attrs:{type:"date",name:"ui-br-ext-from",id:"ui-br-ext-from"},domProps:{value:e.from},on:{input:function(t){t.target.composing||(e.from=t.target.value)}}}),e.count>0&&""==e.from?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e(),e.count>0&&""!=e.from&&""!=e.to&&!e.dateValid?r("span",{staticClass:"ui-br-ext-message"},[e._v("From date cannot be")]):e._e()]),r("div",{staticClass:"ui-br-ext-fromto ui-br-ext-form-container ui-br-ext-text"},[r("label",{attrs:{for:"ui-br-ext-to"}},[e._v("To")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.to,expression:"to"}],attrs:{type:"date",name:"ui-br-ext-to",id:"ui-br-ext-to"},domProps:{value:e.to},on:{input:function(t){t.target.composing||(e.to=t.target.value)}}}),e.count>0&&""==e.to?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e()])]),r("div",{staticClass:"ui-br-ext-input-wrap"},[r("div",{staticClass:"ui-br-ext-input-wrap-label"},[e._v("Include")]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.includeCompleted,expression:"includeCompleted"}],attrs:{type:"checkbox",name:"pdf",id:"ui-br-ext-save-to-pdf"},domProps:{checked:Array.isArray(e.includeCompleted)?e._i(e.includeCompleted,null)>-1:e.includeCompleted},on:{change:function(t){var r=e.includeCompleted,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&(e.includeCompleted=r.concat([i])):s>-1&&(e.includeCompleted=r.slice(0,s).concat(r.slice(s+1)))}else e.includeCompleted=o}}}),r("label",{attrs:{for:"ui-br-ext-save-to-pdf"}},[e._v("Completed")])]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.includeCanceled,expression:"includeCanceled"}],attrs:{type:"checkbox",name:"pdf",id:"ui-br-ext-send-email"},domProps:{checked:Array.isArray(e.includeCanceled)?e._i(e.includeCanceled,null)>-1:e.includeCanceled},on:{change:function(t){var r=e.includeCanceled,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&(e.includeCanceled=r.concat([i])):s>-1&&(e.includeCanceled=r.slice(0,s).concat(r.slice(s+1)))}else e.includeCanceled=o}}}),r("label",{attrs:{for:"ui-br-ext-send-email"}},[e._v("Canceled")])])]),e.reportNotFound?r("div",{staticClass:"ui-br-ext-warning-text"},[e._v(" No Bug report found ")]):e._e(),r("div",{staticClass:"ui-br-ext-btn-group"},[r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.getReports}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Search")])])])],1):e._e(),e.ifGlobal?r("div",{staticClass:"ui-br-ext-tab-item"},[r("BugSearch",{ref:"bugSearchForm",attrs:{account:e.account}}),e.reportNotFound?r("div",{staticClass:"ui-br-ext-warning-text"},[e._v(" No Bug report found ")]):e._e(),r("div",{staticClass:"ui-br-ext-btn-group"},[r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.globalSearch}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Search")])])])],1):e._e()])]),e.reports.length>0?r("div",[r("div",{staticClass:"ui-br-ext-warning-text",staticStyle:{"margin-bottom":"10px"}},[e._v(" "+e._s(e.reports.length)+" Bug report found ")]),e._l(e.reports,(function(t,n){return r("div",{key:n},[r("div",{staticClass:"ui-br-ext-review-card"},[r("div",{staticClass:"ui-br-ext-review-box"},[r("span",{staticClass:"ui-br-ext-review-title"},[e._v("Bug id:")]),r("span",{staticClass:"ui-br-ext-review-text"},[e._v(e._s(t.bugIndex))])]),r("div",{staticClass:"ui-br-ext-review-box"},[r("span",{staticClass:"ui-br-ext-review-title"},[e._v("Bug title:")]),r("span",{staticClass:"ui-br-ext-review-text"},[e._v(e._s(t.title))])]),t.createdAt?r("div",{staticClass:"ui-br-ext-review-box"},[r("span",{staticClass:"ui-br-ext-review-title"},[e._v("Created at:")]),r("span",{staticClass:"ui-br-ext-review-text"},[e._v(e._s(new Date(t.createdAt).toLocaleString()))])]):e._e(),r("div",{staticClass:"ui-br-ext-review-box"},[r("span",{staticClass:"ui-br-ext-btn-lnk",on:{click:function(r){return e.showDetails(t.bugId)}}},[e._v("Details")]),t.screenshotPath?r("a",{staticClass:"ui-br-ext-btn-lnk",attrs:{href:t.screenshotPath,target:"_blank"}},[e._v("Screenshot")]):e._e()])])])}))],2):e._e()])}),Ro=[],Eo=(r("4de4"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"ui-br-ext-info-list"},[e.module&&e.module.name?r("li",[e._m(0),e.module?r("span",[e._v(" "+e._s(e.module.name||"No module chosen"))]):e._e()]):e._e()])}),So=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("strong",[e._v(" Module: ")])])}],Po={name:"ModuleDetails",props:["module"]},Io=Po,Ao=Object(oe["a"])(Io,Eo,So,!1,null,null,null),$o=(Ao.exports,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"ui-br-ext-report-form",attrs:{autocomplete:"off"}},[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-modules"}},[e._v("Search by keyword")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",autocomplete:"off"},domProps:{value:e.searchQuery},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterClicked.apply(null,arguments)},input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),e.count>0&&""==e.searchQuery?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field cannot be empty")]):e._e(),r("span",{staticClass:"ui-br-ext-search-icon"},[r("svg",{staticClass:"feather feather-search",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#00ad55","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[r("circle",{attrs:{cx:"11",cy:"11",r:"8"}}),r("line",{attrs:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}})])])]),r("div",{staticClass:"ui-br-ext-input-wrap"},[r("div",{staticClass:"ui-br-ext-input-wrap-label"},[e._v("Include")]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.includeCompleted,expression:"includeCompleted"}],attrs:{type:"checkbox",name:"pdf",id:"ui-br-ext-save-to-pdf"},domProps:{checked:Array.isArray(e.includeCompleted)?e._i(e.includeCompleted,null)>-1:e.includeCompleted},on:{change:function(t){var r=e.includeCompleted,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&(e.includeCompleted=r.concat([i])):s>-1&&(e.includeCompleted=r.slice(0,s).concat(r.slice(s+1)))}else e.includeCompleted=o}}}),r("label",{attrs:{for:"ui-br-ext-save-to-pdf"}},[e._v("Completed")])]),r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.includeCanceled,expression:"includeCanceled"}],attrs:{type:"checkbox",name:"pdf",id:"ui-br-ext-send-email"},domProps:{checked:Array.isArray(e.includeCanceled)?e._i(e.includeCanceled,null)>-1:e.includeCanceled},on:{change:function(t){var r=e.includeCanceled,n=t.target,o=!!n.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);n.checked?s<0&&(e.includeCanceled=r.concat([i])):s>-1&&(e.includeCanceled=r.slice(0,s).concat(r.slice(s+1)))}else e.includeCanceled=o}}}),r("label",{attrs:{for:"ui-br-ext-send-email"}},[e._v("Canceled")])])])])}),To=[],Bo={name:"BugSearch",props:[],mounted:function(){},data:function(){return{searchQuery:"",count:0,includeCompleted:!1,includeCanceled:!1}},methods:{setFormValue:function(){var e,t;this.oldEnvironment&&(this.searchQuery=null!==(e=null===(t=this.oldEnvironment)||void 0===t?void 0:t.name)&&void 0!==e?e:"",this.environment=this.oldEnvironment)},resetReportData:function(){this.searchQuery=""},formValidation:function(){return this.searchQuery=this.searchQuery.trim(),""!=this.searchQuery||(this.count++,!1)},enterClicked:function(e){return e.preventDefault(),!1}}},Mo=Bo,Oo=Object(oe["a"])(Mo,$o,To,!1,null,null,null),Do=Oo.exports,Fo={name:"AllReports",props:["sharedReports"],components:{EnvironmentSearch:Qt,ModuleSearch:er,ProjectSearch:mr,BugSearch:Do},created:function(){this.get=Ur.getReports,this.getGlobal=Ur.getGlobalReports,this.addClickBlocker=S.addClickBlocker,this.removeClickBlocker=S.removeClickBlocker,this.environment=Gi.store.reviewBug.environment,this.module=Gi.store.reviewBug.module,this.project=Gi.store.reviewBug.project||Gi.store.project,this.account=Gi.store.account,this.from=Gi.store.reviewBug.from,this.to=Gi.store.reviewBug.to,this.reports=this.sharedReports},mounted:function(){var e=this;k.$on("projectChanged",(function(t){e.module={},Gi.store.reviewBug.module={},e.project=t})),this.removeBugCoverEls(),this.showElements()},data:function(){return{reportsToDisplay:[],reports:[],count:0,from:"",to:"",environment:{},module:{},dateValid:!1,account:{},project:{},ifFilter:!1,ifGlobal:!1,searchQuery:"",reportNotFound:!1,includeCompleted:!1,includeCanceled:!1}},methods:{getReports:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.validateForm()){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,e.get(e.account,e.environment.environmentId,e.module.moduleId,e.from,e.to,e.includeCompleted,e.includeCanceled);case 5:r=t.sent,r.length>0?(e.setReports(r),e.showElements(),e.ifFilter=!1,e.ifGlobal=!1,e.reportNotFound=!1):e.reportNotFound=!0,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},validateForm:function(){return this.count=0,this.reports=[],this.$refs.environmentForm.formValidation()||this.count++,this.$refs.moduleForm.formValidation()||this.count++,this.$refs.projectForm.formValidation()||this.count++,this.from||this.count++,this.to||this.count++,this.validateDate()||this.count++,!(this.count>0)&&(this.environment=this.$refs.environmentForm.environment,this.module=this.$refs.moduleForm.module,this.project=this.$refs.projectForm.project,Gi.store.reviewBug.environment=this.environment,Gi.store.reviewBug.module=this.module,Gi.store.reviewBug.project=this.project,Gi.store.reviewBug.from=this.from,Gi.store.reviewBug.to=this.to,!0)},validateDate:function(){var e=new Date(this.from),t=new Date(this.to);return this.dateValid=e.getTime()<=t.getTime(),this.dateValid},showDetails:function(e){this.$emit("show-details",e)},showElements:function(){var e=this;this.reports.forEach((function(t){t.element=e.selectElement(t.xpath,t.bugId)}));var t=document.querySelectorAll(".ui-br-ext-outlined-element");this.addClickBlocker(t),this.reportsToDisplay=this.reports.filter((function(e){return!e.element}))},removeBugCoverEls:function(){var e=document.querySelectorAll(".ui-br-ext-bug-cover");e.forEach((function(e){e.remove()}))},selectElement:function(e,t){var r=!1;try{r=document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(n){console.log(n)}return r&&(this.createElement(r,t),r.classList.add("ui-br-ext-outlined-element"),r.classList.add("ui-br-ext-selected-element-outline-red")),r},createElement:function(e,t){var r=this,n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,i=this.getBoundingClientRect(e,o,n),s=document.createElement("div");s.addEventListener("click",(function(e){r.showDetailsOnClick(e.target)})),s.setAttribute("data-ext-bugid",t),s.setAttribute("class","ui-br-ext-bug-cover"),Object.entries(i).forEach((function(e){var t=Object($t["a"])(e,2),r=t[0],n=t[1];s.style[r]="".concat(n,"px")})),document.body.appendChild(s)},showDetailsOnClick:function(e){var t=Gi.store.activeBugElement,r=e.getAttribute("data-ext-bugid"),n=Gi.store.prevBugCover;if(n){var o=n.getAttribute("data-ext-bugid");if(o==r)return!1}if(t&&(t.classList.add("ui-br-ext-selected-element-outline-red"),t.classList.remove("ui-br-ext-selected-element-outline-green")),n&&n.classList.remove("ui-br-ext-bug-cover-active"),e.classList.add("ui-br-ext-bug-cover-active"),Gi.store.prevBugCover=e,!(r&&r>=0))return!1;k.$emit("show-details",r)},getBoundingClientRect:function(e,t,r){var n=e.getBoundingClientRect(),o=n.top,i=(n.right,n.bottom,n.left);n.width,n.height,n.x,n.y;return o+=t,i+=r,{top:o,left:i}},globalSearch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.bugSearchForm.formValidation()){t.next=2;break}return t.abrupt("return",!1);case 2:return r=e.$refs.bugSearchForm.searchQuery,n=e.$refs.bugSearchForm.includeCompleted,o=e.$refs.bugSearchForm.includeCanceled,t.prev=5,t.next=8,e.getGlobal(e.account,r,n,o);case 8:i=t.sent,i.length>0?(e.setReports(i),e.showElements(),e.ifFilter=!1,e.ifGlobal=!1,e.reportNotFound=!1):e.reportNotFound=!0,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[5,12]])})))()},setReports:function(e){var t=document.querySelectorAll(".ui-br-ext-outlined-element");this.removeClickBlocker(t),this.removeBugCoverEls(),this.reports=e,this.$emit("setReports",e)}}},Uo=Fo,Lo=Object(oe["a"])(Uo,_o,Ro,!1,null,null,null),Ko=Lo.exports,No=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"ui-br-ext-close-details",on:{click:e.close}},[e._v("Close")]),e.report?r("div",{staticClass:"ui-br-ext-review-card"},[e.report.sameElementBugs?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Other bugs for this element:")]),r("div",{staticClass:"ui-br-ext-review-text"},[e._l(e.report.sameElementBugs,(function(t,n){return r("a",{key:n,attrs:{target:"_blank"},on:{click:function(r){return e.getDetails(t.bugId)}}},[e._v(" "+e._s(t.bugIndex)+" ")])})),e._v("    ")],2)]):e._e(),e.report.projectName?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Project:")]),r("div",{staticClass:"ui-br-ext-review-text ui-br-ext-capitalize"},[e._v(e._s(e.report.projectName))])]):e._e(),e.report.moduleName?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Module:")]),r("div",{staticClass:"ui-br-ext-review-text ui-br-ext-capitalize"},[e._v(e._s(e.report.moduleName))])]):e._e(),e.report.bugEnvironment?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Environment:")]),r("div",{staticClass:"ui-br-ext-review-text ui-br-ext-capitalize"},[e._v(e._s(e.report.bugEnvironment))])]):e._e(),r("div",{staticClass:"ui-br-ext-spacer-1"}),e.report.createdAt?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Created:")]),r("div",{staticClass:"ui-br-ext-review-text ui-br-ext-capitalize"},[e._v(e._s(new Date(e.report.createdAt).toLocaleString()))])]):e._e(),e.report.updatedAt?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Last updated:")]),r("div",{staticClass:"ui-br-ext-review-text ui-br-ext-capitalize"},[e._v(e._s(new Date(e.report.updatedAt).toLocaleString()))])]):e._e(),e.userEmail?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Created by:")]),r("div",{staticClass:"ui-br-ext-review-text"},[e._v(e._s(e.userEmail))])]):e._e(),r("div",{staticClass:"ui-br-ext-spacer-1"}),e.report.lkBugStatus?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Status:")]),r("div",{staticClass:"ui-br-ext-review-text ui-br-ext-capitalize"},[e._v(e._s(e.report.lkBugStatus))])]):e._e(),r("div",{staticClass:"ui-br-ext-spacer-1"}),e.report.bugIndex?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Bug ID:")]),r("div",{staticClass:"ui-br-ext-review-text"},[e._v(e._s(e.report.bugIndex))])]):e._e(),e.report.title?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Summary:")]),r("div",{staticClass:"ui-br-ext-review-text"},[e._v(e._s(e.report.title))])]):e._e(),e.report.description?r("div",{staticClass:"ui-br-ext-review-box ui-br-ext-pre"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Description:")]),r("pre",{staticClass:"ui-br-ext-review-text"},[e._v(e._s(e.report.description))])]):e._e(),e.report.stepsToReproduce?r("div",{staticClass:"ui-br-ext-review-box ui-br-ext-pre"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Steps to reproduce:")]),r("pre",{staticClass:"ui-br-ext-review-text"},[e._v(e._s(e.report.stepsToReproduce))])]):e._e(),e.report.actualResult?r("div",{staticClass:"ui-br-ext-review-box ui-br-ext-pre"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Actual results:")]),r("pre",{staticClass:"ui-br-ext-review-text"},[e._v(e._s(e.report.actualResult))])]):e._e(),e.report.expectedResult?r("div",{staticClass:"ui-br-ext-review-box ui-br-ext-pre"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Expected results:")]),r("pre",{staticClass:"ui-br-ext-review-text"},[e._v(e._s(e.report.expectedResult))])]):e._e(),e.report.attachments?r("div",{staticClass:"ui-br-ext-review-box"},[r("div",{staticClass:"ui-br-ext-review-title"},[e._v("Attachments:")]),r("div",{staticClass:"ui-br-ext-review-text"},[e._l(e.report.attachments,(function(t,n){return r("a",{key:n,attrs:{target:"_blank",href:t.path}},[e._v(" "+e._s(t.fileName)+" ")])})),e._v("    ")],2)]):e._e(),r("div",{staticClass:"ui-br-ext-svg-cont"},[r("span",{staticClass:"ui-br-ext-btn-svg btn-svg-screenshot",attrs:{"data-title":"View screenshot"},on:{click:e.viewScreenshot}}),e.report.jiraTicketUrl?r("span",{staticClass:"ui-br-ext-btn-svg btn-svg-jiraLink",attrs:{"data-title":"Review Jira"},on:{click:e.reviewJira}}):e._e(),r("span",{staticClass:"ui-br-ext-btn-svg btn-svg-reselect",attrs:{"data-title":"Reselect element"},on:{click:e.reselect}}),r("span",{staticClass:"ui-br-ext-btn-svg btn-svg-status",attrs:{"data-title":"Status update"},on:{click:e.statusUpdate}}),r("span",{staticClass:"ui-br-ext-btn-svg btn-svg-edit",attrs:{"data-title":"Edit"},on:{click:e.edit}}),r("span",{staticClass:"ui-br-ext-btn-svg btn-svg-pdf",attrs:{"data-title":"PDF"},on:{click:e.pdf}}),r("span",{staticClass:"ui-br-ext-btn-svg btn-svg-mail",attrs:{"data-title":"Email"},on:{click:e.createEmail}}),!e.report.jiraTicketUrl&&e.report.projectJiraId?r("span",{staticClass:"ui-br-ext-btn-svg btn-svg-createJira",attrs:{"data-title":"Create Jira"},on:{click:e.createJira}}):e._e()])]):e._e()])},Qo=[],Vo=function(){document.querySelectorAll(".ui-br-ext-outlined-element").forEach((function(e){var t,r,n;null===(t=e.classList)||void 0===t||t.remove("ui-br-ext-outlined-element"),null===(r=e.classList)||void 0===r||r.remove("ui-br-ext-selected-element-outline-green"),null===(n=e.classList)||void 0===n||n.remove("ui-br-ext-selected-element-outline-red"),e.removeAttribute("data-ext-index")}))},Jo=function(){document.querySelectorAll(".ui-br-ext-bug-cover").forEach((function(e){e.remove()}))},zo=function(e){var t=document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;t&&(t.classList.add("ui-br-ext-outlined-element"),t.classList.add("ui-br-ext-selected-element-outline-red"))},Xo={outlineElement:zo,removeBugCoverEls:Jo,removeOutline:Vo},qo={name:"ReportDetails",components:{},props:["bugId","account","sharedReports"],created:function(){this.get=Ur.getReportDetails,this.getUser=ao.getUserId,this.postJira=Ur.postJira,this.getScreenshotBlob=Ur.getScreenshotBlob,this.getPdf=at.getPdf,this.removeBugCoverEls=Xo.removeBugCoverEls,this.removeOutline=Xo.removeOutline,this.outlineElement=Xo.outlineElement,this.sendEmail=Ir.sendEmail},mounted:function(){this.getDetails(this.bugId)},watch:{bugId:{handler:function(e,t){this.getDetails(e)}}},data:function(){return{filename:"",report:{screenshots:[]},screenshot:"",userEmail:""}},methods:{viewScreenshot:function(){this.report.screenshots[0]&&window.open(this.report.screenshots[0],"_blank")},reselect:function(){this.$emit("reselect",this.report)},getDetails:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.get(t.account,e);case 3:n=r.sent,t.report=n,t.getUserDetails(),t.sharedReports.forEach((function(e){var r=t.sharedReports.filter((function(e){return e.xpath==t.report.xpath&&e.bugId!=t.report.bugId})).map((function(e){return{bugId:e.bugId,bugIndex:e.bugIndex}}));r&&r.length>0&&(t.report["sameElementBugs"]=r)})),t.highLightActiveElement(n.xpath),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},getUserDetails:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getUser(e.account,e.report.createdById);case 3:e.userEmail=t.sent,t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0),null!==(r=t.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=t.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},highLightActiveElement:function(e){var t;try{t=document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(r){console.log(r)}t&&(t.classList.remove("ui-br-ext-selected-element-outline-red"),t.classList.add("ui-br-ext-selected-element-outline-green"),Gi.store.activeBugElement=t)},reviewJira:function(){window.open(this.report.jiraTicketUrl,"_blank")},createJira:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.postJira(e.account,e.report.bugId);case 3:t.sent,e.getDetails(e.report.bugId),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0),null!==(r=t.t0.result)&&void 0!==r&&r.message?k.$emit("toggle-toast",{text:null===(n=t.t0.result)||void 0===n?void 0:n.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},setReportForPdfEmail:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.removeBugCoverEls(),e.removeOutline(),e.report.xpath&&e.outlineElement(e.report.xpath),t.next=5,e.getScreenshot();case 5:e.setProjectModuleEnvObjects();case 6:case"end":return t.stop()}}),t)})))()},pdf:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getScreenshot();case 2:e.setProjectModuleEnvObjects(),e.submitPdf();case 4:case"end":return t.stop()}}),t)})))()},submitPdf:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getPdf(e.report,e.account);case 3:r=t.sent,window.open(r,"_blank"),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0),null!==(n=t.t0.result)&&void 0!==n&&n.message?k.$emit("toggle-toast",{text:null===(o=t.t0.result)||void 0===o?void 0:o.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},close:function(){document.querySelectorAll(".ui-br-ext-selected-element-outline-green").forEach((function(e){e.classList.remove("ui-br-ext-selected-element-outline-green"),e.classList.add("ui-br-ext-selected-element-outline-red")})),this.$emit("close-details")},edit:function(){this.setProjectModuleEnvObjects(),this.$emit("edit-report",this.report)},setProjectModuleEnvObjects:function(){this.report.project={id:this.report.projectId,projectKey:this.report.projectName},this.report.environment={environmentId:this.report.bugEnvironmentId,name:this.report.bugEnvironment},this.report.module={moduleId:this.report.moduleId,name:this.report.moduleName}},deleteReport:function(){var e=confirm("Are you sure?");e&&this.$emit("delete-report",this.report)},statusUpdate:function(){this.$emit("status-update",this.report)},getScreenshot:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getScreenshotBlob(e.account,e.report.bugId);case 3:t.t0=t.sent,e.report.screenshot="data:image/png;base64,"+t.t0,t.next=10;break;case 7:t.prev=7,t.t1=t["catch"](0),console.log(t.t1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},createEmail:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getScreenshot();case 2:return e.setProjectModuleEnvObjects(),t.next=5,e.sendEmail(e.report);case 5:case"end":return t.stop()}}),t)})))()}}},Yo=qo,Go=Object(oe["a"])(Yo,No,Qo,!1,null,null,null),Ho=Go.exports,Wo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"ui-br-ext-close-details",on:{click:e.close}},[e._v("Close")]),r("div",{staticClass:"ui-br-ext-spacer-3"}),r("div",{staticClass:"ui-br-ext-review-card"},[r("div",{staticClass:"ui-br-ext-form-container ui-br-ext-textarea"},[r("label",{attrs:{for:"ui-br-ext-status"}},[e._v("Status choice")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.lkBugStatusId,expression:"lkBugStatusId"}],attrs:{id:"ui-br-ext-status",name:"status"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.lkBugStatusId=t.target.multiple?r:r[0]}}},e._l(e.statusList,(function(t,n){return r("option",{key:n,domProps:{value:t.lkBugStatusId}},[e._v(" "+e._s(t.description)+" ")])})),0),e.count>0&&""==e.status?r("span",{staticClass:"ui-br-ext-message"},[e._v("Field is required")]):e._e()]),r("div",{staticClass:"ui-br-ext-btn-group"},[r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.updateStatus}},[r("span",{staticClass:"ui-br-ext-spinner",class:{active:e.submitInPorgress}}),r("span",[e._v("Update")])]),r("button",{staticClass:"ui-br-ext-btn-danger",attrs:{"data-listener":"off"},on:{click:e.close}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Cancel")])])])])])},Zo=[],ei=function(e,t,r){return new Promise((function(n,o){it.a.patch("".concat(e.repositoryServer,"/bug-status"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,bugId:r,lkBugStatusId:t}).then((function(e){n(e.data.result)})).catch((function(e){o(e.response.data)}))}))},ti=function(e){return new Promise((function(t,r){it.a.get("".concat(e.repositoryServer,"/bug-status-list"),{params:{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid}}).then((function(e){t(e.data.result)})).catch((function(e){console.log(e.reponse),r(e.response.data)}))}))},ri={patchStatus:ei,getStatusList:ti},ni={name:"StatusChoice",components:{},props:["report","account"],created:function(){this.update=ri.patchStatus,this.getList=ri.getStatusList,this.lkBugStatusId=""+this.report.lkBugStatusId},mounted:function(){this.getStatusList(),this.lkBugStatusId=this.report.lkBugStatusId},data:function(){return{lkBugStatusId:void 0,submitInPorgress:!1,statusList:[],count:0}},methods:{updateStatus:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=parseInt(e.lkBugStatusId),!(r&&r>0)){t.next=17;break}return t.prev=2,t.next=5,e.update(e.account,r,e.report.bugId);case 5:if(n=t.sent,"success"!=!n){t.next=8;break}return t.abrupt("return",!1);case 8:e.close(),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0),null!==(o=t.t0.result)&&void 0!==o&&o.message?k.$emit("toggle-toast",{text:null===(i=t.t0.result)||void 0===i?void 0:i.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 15:t.next=18;break;case 17:e.count++;case 18:case"end":return t.stop()}}),t,null,[[2,11]])})))()},getStatusList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getList(e.account);case 3:e.statusList=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},close:function(){this.$emit("close-status")}}},oi=ni,ii=Object(oe["a"])(oi,Wo,Zo,!1,null,null,null),si=ii.exports,ai=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"ui-br-ext-close-details",on:{click:e.close}},[e._v("Close")]),r("div",{staticClass:"ui-br-ext-spacer-3"}),r("ReportForm",{ref:"reportForm",attrs:{report:e.report,validation:e.saveToDb}}),r("FileUpload",{ref:"fileUploadForm",attrs:{account:e.account,report:e.report}}),r("div",{staticClass:"ui-br-ext-btn-group"},[r("button",{staticClass:"ui-br-ext-btn",attrs:{id:"ui-br-ext-save-report","data-listener":"off"},on:{click:e.formValidation}},[r("span",{staticClass:"ui-br-ext-spinner",class:{active:e.submitInPorgress}}),r("span",[e._v("Save")])]),r("button",{staticClass:"ui-br-ext-btn-danger",attrs:{"data-listener":"off"},on:{click:e.cancel}},[r("span",[e._v("Cancel")])])])],1)},ci=[],ui={name:"ReviewDrop",components:{ReportForm:gr,FileUpload:Rr},props:["report","account"],created:function(){this.patchReport=Ur.patchReport,this.delete=Cr.deleteFile},data:function(){return{saveToDb:!0,submitInPorgress:!1}},methods:{formValidation:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.reportForm.formValidation();case 2:if(!t.sent){t.next=6;break}Object.assign(e.report,e.$refs.reportForm.getReportForm()),e.report.attachments=e.$refs.fileUploadForm.getNewUploads(),e.saveReport();case 6:case"end":return t.stop()}}),t)})))()},saveReport:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitInPorgress=!0,t.prev=1,t.next=4,e.patchReport(e.account,e.report);case 4:r=e.$refs.fileUploadForm.filesToRemove,r.length>0?e.deleteFiles(r):e.close(),e.submitInPorgress=!1,t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0),null!==(n=t.t0.result)&&void 0!==n&&n.message?k.$emit("toggle-toast",{text:null===(o=t.t0.result)||void 0===o?void 0:o.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0}),e.submitInPorgress=!1;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})))()},deleteFiles:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=0,e.forEach(function(){var r=Object(c["a"])(regeneratorRuntime.mark((function r(o){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n++,r.prev=1,r.next=4,t.delete(t.account,o,t.report.bugId);case 4:n==e.length&&t.close(),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))()},cancel:function(){this.submitInPorgress=!1,this.$emit("cancel-edit-report")},submitReport:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.postReport(e.account,e.currentModule.moduleId,e.report);case 3:r=t.sent,r.result.bugId&&e.resetReportData(),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),null!==(n=t.t0.result)&&void 0!==n&&n.message?k.$emit("toggle-toast",{text:null===(o=t.t0.result)||void 0===o?void 0:o.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0}),e.submitInPorgress=!1;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},close:function(){this.cancel()}}},li=ui,di=Object(oe["a"])(li,ai,ci,!1,null,null,null),mi=di.exports,pi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"ui-br-ext-close-details",on:{click:e.close}},[e._v("Close")]),r("div",{staticClass:"ui-br-ext-spacer-3"}),r("div",{staticClass:"ui-br-ext-review-card"},[r("p",[e._v("Select an element from page to:")]),e._m(0),r("div",{staticClass:"ui-br-ext-btn-group"},[r("button",{staticClass:"ui-br-ext-btn",attrs:{"data-listener":"off"},on:{click:e.saveSelection}},[r("span",{staticClass:"ui-br-ext-spinner",class:{active:e.submitInPorgress}}),r("span",[e._v("Save selection")])]),r("button",{staticClass:"ui-br-ext-btn-danger",attrs:{"data-listener":"off"},on:{click:e.close}},[r("span",{staticClass:"ui-br-ext-spinner"}),r("span",[e._v("Cancel")])])])])])},vi=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"ui-br-ext-default-list"},[r("li",[e._v("Update the existing screenshot of the bug.")]),r("li",[e._v("Update the xpath of the element.")])])}],hi=function(e,t,r,n){return new Promise((function(o,i){it.a.patch("".concat(e.repositoryServer,"/bug-screenshot"),{registrationKey:e.registrationKey,token:e.token,uuid:e.uuid,bugId:n,screenshot:r,xpath:t}).then((function(e){o(e.data.result)})).catch((function(e){i(e.response.data)}))}))},gi={patchReselect:hi},fi={name:"Reselect",components:{},props:["report","account"],created:function(){this.onSelect=K.onSelect,this.removeClickBlocker=S.removeClickBlocker,this.removeClickFromBody=K.removeClickFromBody,this.getMouseCoordinates=K.getMouseCoordinates,this.getElementXpath=K.getElementXpath,this.onGetScreenshot=te.getScreenshot,this.patch=gi.patchReselect},mounted:function(){this.startSelect()},data:function(){return{xpath:"",screenshot:"",submitInPorgress:!1}},methods:{saveSelection:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.removeClickFromBody(e.getMouseCoordinates),Gi.store.dynamicDomFlow){t.next=6;break}return t.next=4,e.getScreenshot();case 4:t.next=7;break;case 6:e.screenshot=Gi.store.screenshot;case 7:if(r=e.getElementXpath(Gi.store.selectedElement),!e.screenshot||!r){t.next=20;break}return t.prev=9,t.next=12,e.patch(e.account,r,e.screenshot,e.report.bugId);case 12:e.$emit("reselected",{bugId:e.report.bugId,xpath:r}),e.close(),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](9),console.log(t.t0),null!==(n=t.t0.result)&&void 0!==n&&n.message?k.$emit("toggle-toast",{text:null===(o=t.t0.result)||void 0===o?void 0:o.message,danger:!0}):k.$emit("toggle-toast",{text:"Sorry something went wrong.",danger:!0});case 20:case"end":return t.stop()}}),t,null,[[9,16]])})))()},startSelect:function(){var e=document.querySelectorAll(".ui-br-ext-outlined-element");this.removeClickBlocker(e),this.removeBugCoverEls(),this.onSelect()},removeBugCoverEls:function(){var e=document.querySelectorAll(".ui-br-ext-bug-cover");e.forEach((function(e){e.remove()}))},getScreenshot:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("toggle-extension"),t.next=3,e.onGetScreenshot();case 3:e.screenshot=t.sent,e.$emit("toggle-extension");case 5:case"end":return t.stop()}}),t)})))()},close:function(){this.removeClickFromBody(this.getMouseCoordinates),this.$emit("close-reselect")}}},bi=fi,xi=Object(oe["a"])(bi,pi,vi,!1,null,null,null),wi=xi.exports,yi={name:"ReviewDrop",components:{AllReports:Ko,ReportDetails:Ho,Resize:Pt,EditReport:mi,StatusChoice:si,Reselect:wi},created:function(){this.addClickBlocker=S.addClickBlocker,this.removeSingleClickBlocker=S.removeSingleClickBlocker,this.removeClickBlocker=S.removeClickBlocker,this.account=Gi.store.account,this.outlineElement=Xo.outlineElement},mounted:function(){var e=this;this.currentModule=null===Gi||void 0===Gi?void 0:Gi.store.currentModule,this.project=Gi.store.project,this.displayNewBug(),k.$on("show-details",(function(t){e.showDetails(t)}))},data:function(){return{ifModule:!1,ifAccount:!1,ifUser:!1,currentModule:{},account:{},reports:[],report:void 0,project:{},toggle:{allReports:!0,details:!1,edit:!1,status:!1,reselect:!1},elementId:"ui-br-ext-review",bugId:void 0,projectId:void 0}},methods:{closeDetails:function(){this.toggleChildren("allReports")},showDetails:function(e){this.bugId=e,this.toggleChildren("details")},showEditReport:function(e){this.bugId=e.bugId,this.report=e,this.toggleChildren("edit")},showStatusUpdate:function(e){this.bugId=e.bugId,this.report=e,this.toggleChildren("status")},showReselect:function(e){this.report=e,this.toggleChildren("reselect")},closeReselect:function(){this.toggleChildren("details")},closeStatus:function(){this.toggleChildren("details")},cancelEditReport:function(){this.toggleChildren("details")},toggleChildren:function(e){var t=this;Object.keys(this.toggle).forEach((function(r){t.toggle[r]=r==e}))},updateReportOnReselect:function(e){var t=this.reports.findIndex((function(t){return t.bugId==e.bugId}));this.reports[t]["xpath"]=e.xpath,this.outlineElement(e.xpath)},setReports:function(e){this.reports=e},displayNewBug:function(){Gi.store.bugId&&(this.showDetails(Gi.store.bugId),this.selectElement(Gi.store.xpath),Gi.store.bugId=void 0,Gi.store.xpath="")},selectElement:function(e){var t=!1;try{t=document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(r){console.log(r)}t&&(t.classList.add("ui-br-ext-outlined-element"),t.classList.add("ui-br-ext-selected-element-outline-red"))}}},Ci=yi,ki=Object(oe["a"])(Ci,ko,jo,!1,null,null,null),ji=ki.exports,_i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-dropdown-item ui-br-ext-video",attrs:{id:"ui-br-ext-video"}},[r("div",{staticClass:"ui-br-ext-drop-title"},[e._v("Screen Capture")]),r("div",{staticClass:"ui-br-ext-btn-group"},[r("button",{staticClass:"ui-br-ext-btn",attrs:{id:"ui-br-ext-save-report","data-listener":"off"},on:{click:e.saveVideo}},[r("span",[e._v("Save")])]),r("button",{staticClass:"ui-br-ext-btn-danger",attrs:{"data-listener":"off"},on:{click:function(t){return e.cancelRecord()}}},[r("span",[e._v("Cancel")])])]),r("a",{staticStyle:{display:"none !important"},attrs:{href:"",id:"uiExtBrDownloadVideo"}})])},Ri=[],Ei={name:"VideoRecordDrop",components:{},computed:{},mounted:function(){this.account=Gi.store.account,this.module=Gi.store.currentModule,this.project=Gi.store.project,this.canUpload=this.isUploadable()},data:function(){return{upload:!1,download:!1,canUpload:!1}},methods:{isUploadable:function(){if(this.project&&this.project.id&&this.module&&this.module.moduleId)return!0},startVideo:function(){console.log("start")},stopRecord:function(){console.log("stop")},saveVideo:function(){k.$emit("download")},preview:function(){console.log("preview"),k.$emit("preview")},cancelRecord:function(){k.$emit("toggle-video-drop",{drop:!1,videoMode:!1})}}},Si=Ei,Pi=Object(oe["a"])(Si,_i,Ri,!1,null,null,null),Ii=Pi.exports,Ai={name:"Dropdown",components:{ReportBugDrop:Qr,SettingsDrop:Co,ReviewDrop:ji,VideoRecordDrop:Ii},props:["dropToToggle"],watch:{dropToToggle:function(e,t){this.toggleDropdown(e.id,e.state,t.id)}},data:function(){return{toggleCompleted:!1,toggleReportBugDrop:!1,drops:{reportbug:!1,settings:!1,review:!1,reportdetails:!1,video:!1},reportIndex:void 0}},methods:{toggleDropdown:function(e,t,r){this.drops[r]=!1,this.drops[e]=t}}},$i=Ai,Ti=Object(oe["a"])($i,et,tt,!1,null,null,null),Bi=Ti.exports,Mi=function(){var e=this,t=e.$createElement;e._self._c;return e._e()},Oi=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-br-ext-modal-body"},[r("div",{staticClass:"ui-br-ext-modal-header"}),r("div",{staticClass:"ui-br-ext-modal-main"}),r("div",{staticClass:"ui-br-ext-modal-footer"})])}],Di={name:"Modal"},Fi=Di,Ui=Object(oe["a"])(Fi,Mi,Oi,!1,null,null,null),Li=Ui.exports,Ki={name:"Extension",components:{MainMenu:Ze,Dropdown:Bi,Modal:Li},data:function(){return{dropToToggle:{},toggleExtensionVal:!0,showToast:!1,dangerToast:!1,toastText:""}},mounted:function(){var e=this;k.$on("toggle-toast",(function(t){e.setToast(t)}))},methods:{setToast:function(e){var t=this;this.toastText=e.text,this.dangerToast=e.danger,this.showToast=!0,setTimeout((function(){t.hideToast()}),4e3)},toggleDrop:function(e){this.dropToToggle=e},toggleExtension:function(e){this.toggleExtensionVal=!this.toggleExtensionVal},hideToast:function(){this.showToast=!1,this.toastText=""}}},Ni=Ki,Qi=Object(oe["a"])(Ni,u,l,!1,null,null,null),Vi=Qi.exports,Ji={name:"App",components:{Extension:Vi},data:function(){return{userData:"",account:{}}},created:function(){this.localStorage=on,this.auth=kn.auth,this.getUserData()},methods:{getUserData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.localStorage.get("userData");case 3:r=t.sent,e.login(r),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},adminUserAuth:function(){var e={registrationKey:"61b589b5f03c42.30439098",userEmail:"uzsultanov@gmail.com",userAppId:"a3a6120c-e3aa-4185-a664-53a1567b99e4"};this.login(e)},regularUserAuth:function(){var e={registrationKey:"61b589b5f03c42.30439098",userEmail:"bahti005@gmail.com",userAppId:"a3a6120c-e3aa-4185-a664-53a1567b99e4"};this.login(e)},login:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return",!1);case 2:return r.prev=2,r.next=5,t.auth(e);case 5:return n=r.sent,Gi.store.account=Object(a["a"])(Object(a["a"])({},e),n),r.next=9,t.localStorage.set("userData",e);case 9:k.$emit("account-loaded"),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](2),console.log(r.t0),k.$emit("toggle-toast",{text:r.t0,danger:!0});case 16:case"end":return r.stop()}}),r,null,[[2,12]])})))()},checkSavedBug:function(){var e=window.localStorage.getItem("ezBugSavedReport");if(null!=e){var t=JSON.parse(e);t.xpath&&this.setSavedBug(t)}},setSavedBug:function(e){var t,r=document.getElementById("ui-br-ext-report-bug-button");r.classList.remove("ui-br-ext-report-bug-inactive");try{t=document.evaluate(e.xpath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,Gi.store.selectedElement=t,console.log(Gi.store.selectedElement)}catch(n){console.log(n)}r.click(),k.$emit("show-saved-data",e)}}},zi=Ji,Xi=Object(oe["a"])(zi,i,s,!1,null,null,null),qi=Xi.exports;o["a"].config.productionTip=!1;var Yi=new o["a"]({render:function(e){return e(qi)}}).$mount("#ui-br-ext-extension-container");window.destroyeUibrextInstance=function(){var e=document.getElementById("ui-br-ext-extension");e.remove(),Yi.$destroy()};var Gi=new o["a"]({data:{store:{globalSettings:{saveToDb:!0},selectedElement:"",currentElementInlineStyle:"",selectedElementRect:"",account:{},bugId:void 0,xpath:"",activeBugElement:void 0,activeBugCover:void 0,project:{projectKey:"",jiraId:"",saveToJira:!1},modules:[],user:{},dynamicDomFlow:!1,currentModule:{},screenshot:"",reports:[],report:{description:"",actualResult:"",expectedResult:"",stepsToReproduce:"",saveJira:!1,savePdf:!1,saveScreenshot:!1,xpath:"",screenshot:"",url:"",queryWidth:550,user:void 0},reportBug:{module:{},environment:{},project:{}},reviewBug:{module:{},environment:{},project:{},from:"",to:""}}}})}});